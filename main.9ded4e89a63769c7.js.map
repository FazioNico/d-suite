{"version":3,"file":"main.9ded4e89a63769c7.js","mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;;;;;;;;;AC9OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;;;;;;;;;ACtCA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA","sources":["./apps/browser/src/app/app.guard.ts","./apps/browser/src/app/app.module.ts","./apps/browser/src/app/app.routes.ts","./apps/browser/src/app/components/app/app.component.ts","./apps/browser/src/app/components/app/app.component.html","./apps/browser/src/app/components/dashboard/dashboard.component.ts","./apps/browser/src/app/components/dashboard/dashboard.component.html","./apps/browser/src/app/components/index.ts","./apps/browser/src/app/components/update/update.component.ts","./apps/browser/src/app/pipes/address-to-avatar.pipe.ts","./apps/browser/src/app/providers/api-config.provider.ts","./apps/browser/src/app/providers/authentication.provider.ts","./apps/browser/src/app/providers/communication.provider.ts","./apps/browser/src/app/providers/database.provider.ts","./apps/browser/src/app/providers/encryption.provider.ts","./apps/browser/src/app/providers/error.provider.ts","./apps/browser/src/app/providers/index.ts","./apps/browser/src/app/providers/is-prod.provider.ts","./apps/browser/src/app/providers/loader.provider.ts","./apps/browser/src/app/providers/media-storage.provider.ts","./apps/browser/src/app/providers/strategy.provider.ts","./apps/browser/src/app/services/datastore.service.ts","./apps/browser/src/app/services/did-encryption.service.ts","./apps/browser/src/app/services/did.service.ts","./apps/browser/src/app/services/global-error-handler.service.ts","./apps/browser/src/app/services/index.ts","./apps/browser/src/app/services/ipfs.service.ts","./apps/browser/src/app/services/notification.service.ts","./apps/browser/src/app/services/pinata.service.ts","./apps/browser/src/app/services/prompt-strategy.service.ts","./apps/browser/src/app/services/web3-auth.service.ts","./apps/browser/src/app/services/web3storage.service.ts","./apps/browser/src/app/services/xmtp.service.ts","./apps/browser/src/app/strategies/encryption.strategy.ts","./apps/browser/src/app/strategies/index.ts","./apps/browser/src/app/strategies/ipfs-pinning.strategy.ts","./apps/browser/src/environments/environment.prod.ts","./apps/browser/src/main.ts","./libs/interfaces/src/index.ts","./libs/interfaces/src/lib/abstracts/strategy.ts","./libs/interfaces/src/lib/interfaces.ts","./libs/token-injection/src/index.ts","./libs/token-injection/src/lib/token-injection.ts","./libs/token-injection/src/lib/token.enum.ts","./node_modules/@ionic/core/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","./node_modules/@ionic/pwa-elements/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/asn1.js/node_modules/bn.js/lib|buffer","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/bn.js/lib|buffer","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams|util","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/browserify-sign/node_modules/readable-stream/lib|util","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/create-ecdh/node_modules/bn.js/lib|buffer","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/diffie-hellman/node_modules/bn.js/lib|buffer","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/elliptic/node_modules/bn.js/lib|buffer","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/hash-base/node_modules/readable-stream/lib/internal/streams|util","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/hash-base/node_modules/readable-stream/lib|util","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/ipfs-core/src|ipfs-utils/src/files/glob-source.js","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/ipfs-http-client/src|ipfs-utils/src/files/glob-source.js","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/miller-rabin/node_modules/bn.js/lib|buffer","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/public-encrypt/node_modules/bn.js/lib|buffer","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/rate-limiter-flexible/lib|cluster","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams|util","ignored|/Users/dev-fazio/Nicolas Fazio/repos/hexa/node_modules/stream-browserify/node_modules/readable-stream/lib|util"],"sourcesContent":["import { inject, Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { filter, firstValueFrom } from 'rxjs';\nimport {\n  IIdentityService,\n  IAuthGuardService\n} from '@hexa/interfaces';\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\n\n@Injectable()\nexport class AppGuard implements CanActivate {\n  private readonly _router = inject(Router);\n  private readonly _authService = inject<IAuthGuardService>(\n    getInjectionToken(TOKENS_NAME.APP_WEB3AUTH_SERVICE)\n  );\n  private readonly _didService = inject<IIdentityService>(\n    getInjectionToken(TOKENS_NAME.APP_DID_SERVICE)\n  );\n\n  async canActivate(): Promise<boolean> {\n    let canActivateThisRoute = false;\n    const isAuthenticate = this._didService?.did$?.value?.authenticated;\n    if (!isAuthenticate) {\n      const isReconnected = await this._isReconnect();\n      if (isReconnected === true) {\n        canActivateThisRoute = true;\n      } else {\n        await this._router.navigate(['/auth/login']);\n        canActivateThisRoute = false;\n      }\n    } else {\n      canActivateThisRoute = true;\n    }\n    return canActivateThisRoute;\n  }\n\n  private async _isReconnect() {\n    const data = window.localStorage.getItem('connectedWallets');\n    if (!data) {\n      return false;\n    }\n    const previouslyConnectedWallets = JSON.parse(data);\n    if (!previouslyConnectedWallets) {\n      return false;\n    }\n    console.log('[INFO] {{AppGuard}} previouslyConnectedWallets: ', previouslyConnectedWallets);\n    \n    // Connect the most recently connected wallet (first in the array)\n    await this._authService.connectWallet(previouslyConnectedWallets[0]);\n    await firstValueFrom(\n      this._authService.isWaiting$.pipe(filter((isWaiting) => !isWaiting))\n    );\n    const isAuthenticate = this._didService?.did$?.value?.authenticated;\n    return isAuthenticate;\n  }\n}\n","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { ServiceWorkerModule } from '@angular/service-worker';\nimport { IonicModule } from '@ionic/angular';\n\nimport { appRoutes } from './app.routes';\nimport { AppGuard } from './app.guard';\nimport { COMPONENTS, MAIN_COMPONENT } from './components';\nimport { environment } from '../environments/environment';\nimport { PROVIDERS } from './providers';\nimport { PIPES } from './pipes';\n\n@NgModule({\n  declarations: [\n    ...COMPONENTS,\n    ...PIPES,\n  ],\n  imports: [\n    BrowserModule,\n    CommonModule,\n    IonicModule.forRoot({\n      mode: 'ios',\n    }),\n    RouterModule.forRoot(appRoutes, {\n      initialNavigation: 'enabledBlocking',\n      useHash: true,\n    }),\n    ServiceWorkerModule.register('ngsw-worker.js', {\n      enabled: environment.production,\n      // Register the ServiceWorker as soon as the application is stable\n      // or after 30 seconds (whichever comes first).\n      registrationStrategy: 'registerWhenStable:30000',\n    }),\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n  providers: [\n    AppGuard,\n    ...PROVIDERS,\n  ],\n  bootstrap: [MAIN_COMPONENT],\n})\nexport class AppModule {}\n","import { Route } from '@angular/router';\nimport { AppGuard } from './app.guard';\nimport { DashboardComponent } from './components/dashboard/dashboard.component';\n\nexport const appRoutes: Route[] = [\n  {\n    path: '',\n    children: [\n      {\n        path: 'auth',\n        loadChildren: () => import('@hexa/auth').then(m => m.AuthModule)\n      },\n      {\n        path: 'ipfs',\n        // loadComponent: () => import('./components/ipfs/ipfs.component').then(m => m.IpfsComponent),\n        children: [\n          {\n            path: ':cid',\n            loadComponent: () => import('./components/ipfs/ipfs.component').then(m => m.IpfsComponent),\n\n          }\n        ]\n      },\n      {\n        path: 'h',\n        component: DashboardComponent,\n        canActivate: [AppGuard],\n        children: [\n          {\n            path: 'dashboard',\n            loadChildren: () => import('@hexa/welcome').then(m => m.WelcomeModule)\n          },\n          {\n            path: 'calendar',\n            loadChildren: () => import('@hexa/calendar').then(m => m.CalendarModule)\n          },\n          {\n            path: 'drive',\n            loadChildren: () => import('@hexa/drive').then(m => m.DriveModule)\n          },\n          {\n            path: 'wallet',\n            loadChildren: () => import('@hexa/wallet').then(m => m.WalletModule)\n          },\n          {\n            path: 'notes',\n            loadChildren: () => import('@hexa/notes').then(m => m.NotesModule)\n          },\n          {\n            path: '',\n            redirectTo: 'dashboard',\n            pathMatch: 'full'\n          }\n        ]\n      },\n      {\n        path: '',\n        redirectTo: '/auth/login',\n        pathMatch: 'full'\n      }\n    ]\n  },\n];\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { EnvironmentInjector } from '@angular/core';\nimport { ILoadingService } from '@hexa/interfaces';\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\nimport { environment } from '../../../environments/environment';\nimport '@khmyznikov/pwa-install';\nimport { register } from 'swiper/element/bundle';\n\n// register Swiper elements globaly at the top level component to avoid bundling issues\nregister();\n\n@Component({\n  selector: 'hexa-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent implements OnInit {\n  constructor(\n    public readonly environmentInjector: EnvironmentInjector,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_IS_PROD))\n    public readonly isProd: boolean,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_LOADER_SERVICE))\n    public readonly loaderService: ILoadingService\n  ) {}\n\n  ngOnInit(): void {\n    const version = environment.version;\n    const env = `[INFO] hexa PWA APP\\nVersion: ${version} - ${\n      this.isProd ? 'PROD' : 'DEV'\n    }`;\n    (window as any)['env'] = env;\n    console.log(env);\n  }\n}\n","<ion-router-outlet\n  [environmentInjector]=\"environmentInjector\"\n></ion-router-outlet>\n<ion-progress-bar\n  *ngIf=\"loaderService.isVisible$ | async\"\n  type=\"indeterminate\"\n></ion-progress-bar>\n<pwa-install manifest-url=\"./manifest.webmanifest\"></pwa-install>\n<hexa-update></hexa-update>\n","import { DOCUMENT } from '@angular/common';\nimport { Component, Inject, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { IAuthService, INotificationService, IPromptStrategyService } from '@hexa/interfaces';\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\nimport { AlertController, IonPopover, IonToggle, LoadingController, ToastController } from '@ionic/angular';\nimport { environment } from '../../../environments/environment';\nimport { BehaviorSubject, firstValueFrom, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'hexa-dashboard',\n  templateUrl: `./dashboard.component.html`,\n  styleUrls: ['./dashboard.component.scss'],\n})\nexport class DashboardComponent implements OnInit, OnDestroy {\n  // public routerUrl$: Observable<string>;\n  public isDarkMode$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  public version = (environment.production ? '' : '[DEV]') + `${environment.version}`;\n  public features = [\n    // {name: 'home', url: 'dashboard', sort: 0, isEnabled: false, isVisible: false},\n    {name: 'folder-open', url: 'drive', sort: 5, isEnabled: true, isVisible: true},\n    {name: 'wallet-sharp', url: 'wallet', sort: 10, isEnabled: true, isVisible: true},\n    {name: 'calendar-number', url: 'calendar', sort: 20, isEnabled: true, isVisible: false},\n    {name: 'clipboard', url: 'notes', sort: 25, isEnabled: true, isVisible: false},\n    {name: 'chatbubbles', url: 'chat', sort: 30, isEnabled: false, isVisible: false},\n    {name: 'checkbox', url: 'todos', sort: 40, isEnabled: false, isVisible: false},\n    // {name: 'add', url: 'add', sort: 100, isEnabled: false, isVisible: true},\n  ]\n  .sort((a,b) => a.sort - b.sort)\n  .filter(f => f.isVisible);\n  public readonly isNotifEnabled$ = this._notificationService.isConnected$;\n  public readonly account$ = this._authService.account$;\n  private readonly _subs: Subscription[] = [];\n\n  constructor(\n    private readonly _router: Router,\n    private readonly _route: ActivatedRoute,\n    private readonly _toastService: ToastController,\n    @Inject(DOCUMENT) private readonly _document: Document,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_WEB3AUTH_SERVICE)) private readonly _authService: IAuthService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_NOTIFICATION_SERVICE)) private readonly _notificationService: INotificationService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_PROMPT_STRATEGY_SERVICE)) private readonly _promptStrategy: IPromptStrategyService,\n    ) {}\n\n  ngOnInit() {\n    this._checkDarkModeSetting();\n    const sub = this._notificationService.notifications$.subscribe(\n      async (messages) => {\n        if (messages.length === 1) {\n          await this.displayNotification(messages[0]);\n        } else if (messages.length > 1) {\n          const content = `You have ${messages.length} new notifications`;\n          await this.displayNotification(content);\n        }\n      }\n    );\n    this._subs.push(sub);\n    const { params: {id: _id = null} = {}} = this._route.snapshot.parent||{};\n    // this.routerUrl$ = this._router.events.pipe(\n    //   // filter only navigation end events\n    //   filter((event) => event instanceof NavigationEnd),\n    //   map((event: NavigationEnd) => {\n    //     return event?.url;\n    //   }),\n    //   filter(url => !!url),\n    //   // trick to manage first navigation enter on MainPage from other module\n    //   // Force with default pannel url to prevent incorrect display color for active link \n    //   map(url =>  (url.match(/\\//g)||'').length > 2 ? url : url + '/settings'),\n    // );\n  }\n\n  ngOnDestroy(): void {\n    this._subs.forEach((sub) => sub.unsubscribe());\n  }\n\n  togglePage(path: string) {    \n    const {id: streamId} = this._route.snapshot.params;\n    this._router.navigate([`/h/${path}`])\n  }\n\n  async toogleNotification(popoverElement: IonPopover, toggleElement: IonToggle) {\n    // disable element to prevent multiple click\n    toggleElement.disabled = true;\n    let message = '';\n    const isConnected = await firstValueFrom(this._notificationService.isConnected$);\n    if (isConnected) {\n      await this._notificationService.disconnect();\n      message = `Notifications are disabled`; \n    } else {\n      message = await this._notificationService\n      .connect()\n      .then(() => `Notifications are  enabled`)\n      .catch(() =>  'Failed to enable notifications');\n    }\n    // do not miss to enable element back\n    await popoverElement.dismiss();\n    await this.displayNotification(message);\n    toggleElement.disabled = false;\n  }\n\n  async displayNotification(message: string) {\n    const ionToast = await this._toastService.create({\n      message,\n      duration: 5000,\n      cssClass: 'notification-toast',\n      icon: 'information-circle-outline',\n      position: 'top',\n      buttons: [\n        {\n          text: 'ok',\n          role: 'cancel',\n        },\n      ],\n    });\n    await ionToast.present();\n  }\n\n  async setupIPFSPinService(popoverElement: IonPopover) {\n    // close popover\n    popoverElement.dismiss();\n    // extract user data\n    const userData = this._authService.profile$.value;\n    // check existing config for pining servcie and reset value if needed\n    const config = await this._promptStrategy.askSetupService({\n      token: userData?.ipfsConfig?.token,\n      serviceName: userData?.ipfsConfig?.serviceName\n    });\n    if (config?.token === '' ) {\n      config.serviceName = '';\n    }\n    if (!config) {\n      return;\n    }\n    // save user config to user base\n    try {\n      await this._authService.updateProfilData({\n        ...userData,\n        ipfsConfig: {\n          ...config\n        }\n      });\n    } catch (error) {\n      throw new Error('Failed to save IPFS pinning service configuration');\n    }\n    // display toast confirmation\n    const confirmationMessage = 'IPFS pinning service configured';\n    const ionToast = await this._toastService.create({\n      message: confirmationMessage,\n      color: 'success',\n      duration: 2000,\n    });\n    await ionToast.present();\n  }\n\n  async disconnect() {\n    await this._authService.disconnect();\n  }\n\n  async toggleDarkMode($event: any) {\n    // toggle dark mode class\n    this._document.body.classList.toggle('dark');\n    // get current dark mode value and save it to local storage\n    const isDarkmode = this._document.body.classList.contains('dark');\n    this._document.defaultView?.localStorage.setItem('hexa:darkMode', isDarkmode.toString());\n    // update dark mode value\n    this.isDarkMode$.next(isDarkmode);\n  }\n\n  copyAccountAddressToClipboard() {\n    const account = this._authService.account$.value;\n    if (account) {\n      navigator.clipboard.writeText(account);\n      // display toast\n      this._toastService.create({\n        message: 'Account address copied to clipboard',\n        duration: 2000,\n        color: 'success',\n        position: 'bottom',\n      }).then((toast) => toast.present());\n    }\n  }\n\n  private _checkDarkModeSetting() {\n    const isSettingSaved = this._document.defaultView?.localStorage.getItem('hexa:darkMode');\n    if (!isSettingSaved) {\n      this.isDarkMode$.next(this._document.body.classList.contains('dark'));\n      return;\n    } \n    if (isSettingSaved === 'true') {\n      this._document.body.classList.add('dark');\n      this.isDarkMode$.next(true);\n    } else {\n      this._document.body.classList.remove('dark');\n      this.isDarkMode$.next(false);\n    }\n  }\n}\n","<ion-split-pane contentId=\"main\" when=\"sm\">\n  <ion-menu contentId=\"main\" #menuElement>\n    <ion-header class=\"ion-no-border\">\n      <ion-toolbar>\n        <ion-img \n          (click)=\"togglePage('dashboard'); menuElement.close()\" \n          class=\"logo\" \n          src=\"./assets/images/logo.svg\"></ion-img>\n        <ion-chip>\n          beta\n        </ion-chip>\n      </ion-toolbar>\n    </ion-header>\n    <ion-content [fullscreen]=\"true\" color=\"primary\">\n      <div class=\"centervert\">\n        <ion-button\n          fill=\"clear\"\n          expand=\"block\"\n          size=\"large\"\n          class=\"link\"\n          *ngFor=\"let feature of features; let i = index\"\n          [disabled]=\"!feature.isEnabled\"\n          (click)=\"togglePage(feature.url); menuElement.close()\"\n          routerLinkActive=\"active-link\"\n        >\n          <ion-icon\n            slot=\"icon-only\"\n            [name]=\"feature.name\"\n          ></ion-icon>\n        </ion-button>\n      </div>\n    </ion-content>\n    <ion-footer class=\"ion-no-border\">\n      <ion-toolbar>\n        <!-- <ion-button fill=\"clear\" (click)=\"toogleNotification()\">\n          <ion-icon\n            slot=\"icon-only\"\n            color=\"light\"\n            size=\"small\"\n            [name]=\"\n              (isNotifEnabled$ | async)\n                ? 'notifications-outline'\n                : 'notifications-off-outline'\n            \"\n          ></ion-icon>\n        </ion-button> -->\n        <ion-button id=\"setting-options\" fill=\"clear\">\n          <ion-icon\n            slot=\"icon-only\"\n            color=\"light\"\n            size=\"small\"\n            name=\"settings-outline\"\n          ></ion-icon>\n        </ion-button>\n        <ion-popover \n          trigger=\"setting-options\" \n          triggerAction=\"click\" \n          #popoverSettingElement\n          size=\"auto\"\n          mode=\"md\"\n          [keepContentsMounted]=\"true\"\n          [dismissOnSelect]=\"true\">\n          <ng-template>\n            <ion-content class=\"ion-no-padding\" mode=\"ios\">\n              <ion-list lines=\"none\" class=\"ion-no-padding ion-margin-bottom\">\n                <ion-list-header class=\"ion-margin-bottom\">\n                  <ion-label>\n                    Global Settings\n                    <p>\n                      <small>HEXA {{version}}</small>\n                    </p>\n                  </ion-label>\n                </ion-list-header>\n                <ion-item button \n                (click)=\"setupIPFSPinService(popoverSettingElement)\">\n                  <ion-label>\n                    <h3>Pin service</h3>\n                    <p>\n                      Manage IPFS pinning service\n                    </p>\n                  </ion-label>\n                </ion-item>\n                <ion-item>\n                  <!-- <ion-icon\n                    slot=\"start\"\n                    [name]=\"\n                      (isNotifEnabled$ | async)\n                        ? 'notifications-outline'\n                        : 'notifications-off-outline'\n                    \"\n                  ></ion-icon> -->\n                  <ion-label>\n                    <h3>Notifications</h3>\n                    <p>\n                      Enable or disable\n                    </p>\n                  </ion-label>\n                  <ion-toggle\n                    #toggleNotifElement\n                    slot=\"end\"\n                    size=\"small\"\n                    [checked]=\"isNotifEnabled$ | async\"\n                    (click)=\"toogleNotification(popoverSettingElement, toggleNotifElement)\"\n                  ></ion-toggle>\n                </ion-item>\n                <ion-item>\n                  <ion-label>\n                    <h3>Dark mode</h3>\n                    <p>\n                      Enable or disable\n                    </p>\n                  </ion-label>\n                  <ion-toggle\n                    slot=\"end\"\n                    [checked]=\"(isDarkMode$ | async)\"\n                    (ionChange)=\"toggleDarkMode($event)\"\n                  ></ion-toggle>\n                </ion-item>\n              </ion-list>\n            </ion-content>\n          </ng-template>\n        </ion-popover>\n      </ion-toolbar>\n    </ion-footer>\n  </ion-menu>\n  <ion-router-outlet id=\"main\" mode=\"md\">\n    <ion-button mode=\"ios\" class=\"authMiniDash\" id=\"profil-trigger\">\n      <ion-icon src=\"./assets/images/logo-colored.svg\"></ion-icon>\n      <ion-img [src]=\"account$.value | addressToAvatar | async\"></ion-img>\n    </ion-button>\n\n    <ion-popover\n      #popOverProfil\n      class=\"profil-popover\"\n      trigger=\"profil-trigger\"\n      size=\"auto\"\n      side=\"bottom\"\n      alignment=\"start\"\n      [keepContentsMounted]=\"true\"\n      [dismissOnSelect]=\"false\"\n    >\n      <ng-template>\n        <ion-content class=\"ion-padding\">\n          <ion-item *ngIf=\"account$.value as accountId\" lines=\"none\" class=\"item-profil\"> \n            <ion-avatar slot=\"start\" >\n              <ion-img\n                [ngClass]=\"{'online': true}\"\n                [src]=\"accountId | addressToAvatar | async\"></ion-img>\n            </ion-avatar>\n            <ion-label class=\"ion-text-nowrap\">\n              <label>\n                <ion-text color=\"medium\">\n                  <small>Connected address</small>\n                </ion-text>\n              </label>\n              {{ accountId.slice(0, 6) }}...{{ accountId.slice(-4) }}\n              <!-- <label>\n                <ion-text color=\"medium\">\n                  <label>\n                    <small>Chain</small>\n                  </label>\n                </ion-text>\n              </label>\n              {{ chainId$ | async | networkName }} -->\n            </ion-label>\n            <ion-buttons\n              slot=\"end\"\n              class=\"ion-no-margin ion-margin-start\"\n              (click)=\"copyAccountAddressToClipboard()\"\n            >\n              <ion-button size=\"small\" fill=\"clear\">\n                <ion-icon\n                  color=\"medium\"\n                  size=\"small\"\n                  slot=\"icon-only\"\n                  name=\"copy-outline\"\n                ></ion-icon>\n              </ion-button>\n            </ion-buttons>\n          </ion-item>\n          <!-- <ion-item lines=\"none\" class=\"ion-margin-top\">\n            <ion-icon size=\"small\" name=\"moon-outline\" slot=\"start\"></ion-icon>\n            <ion-toggle slot=\"end\" color=\"primary\" [checked]=\"darkMode\" (ionChange)=\"toggleDarkMode()\"></ion-toggle>\n            <ion-label>\n              Dark mode\n            </ion-label>\n          </ion-item> -->\n          <ion-item\n            lines=\"none\"\n            class=\"ion-margin-top disconnect-item\"\n            (click)=\"disconnect();popOverProfil.dismiss();\"\n          >\n            <ion-icon slot=\"start\" name=\"log-out-outline\"></ion-icon>\n            <ion-label>\n              <ion-text> Disconnect </ion-text>\n            </ion-label>\n          </ion-item>\n        </ion-content>\n      </ng-template>\n    </ion-popover>\n  </ion-router-outlet>\n</ion-split-pane>\n","import { AppComponent } from './app/app.component';\nimport { DashboardComponent } from './dashboard/dashboard.component';\nimport { UpdateComponent } from './update/update.component';\n\nexport const MAIN_COMPONENT = AppComponent;\n\nexport const COMPONENTS = [\n  MAIN_COMPONENT,\n  DashboardComponent,\n  UpdateComponent\n];","import { Component } from '@angular/core';\nimport { SwUpdate } from '@angular/service-worker';\nimport { ToastController, ToastOptions } from '@ionic/angular';\nimport { filter, map, merge, Observable, of, Subject } from 'rxjs';\nimport { environment } from '../../../environments/environment';\n\n@Component({\n  selector: 'hexa-update',\n  template: `<div *ngIf=\"updateAvailable$ | async\"></div>`,\n  styles: [``],\n})\nexport class UpdateComponent {\n  updateAvailable$: Observable<boolean>;\n  closed$ = new Subject<void>();\n\n  constructor(private updates: SwUpdate, private _toast: ToastController) {\n    console.log('Application updater install: ', environment.production);\n    // create observable to check for updates\n    // if there is an update, display a toast.\n    this.updateAvailable$ = merge(\n      of(false),\n      this.updates.versionUpdates.pipe(\n        filter((e) => e.type === 'VERSION_DETECTED'),\n        map(async () => await this._displayNotif()),\n        map(() => true)\n      ),\n      this.closed$.pipe(map(() => false))\n    );\n  }\n\n  /**\n   * Method to activate the update\n   * and reload the application\n   * @returns\n   */\n  async activateUpdate() {\n    if (!environment.production) {\n      return;\n    }\n    await this.updates.activateUpdate();\n    location.reload();\n  }\n\n  /**\n   * Method to display a toast that will explain to the user\n   * that a new version is available.\n   * When the toast is closed, the update will be activated\n   * and the application will be reloaded. by the dedicated method `activateUpdate`.\n   */\n  private async _displayNotif() {\n    const duration = 1000 * 30; // 30 seconds\n    const data = <ToastOptions>{\n      message: 'New version available!',\n      position: 'bottom',\n      showCloseButton: true,\n      closeButtonText: `Update`,\n      buttons: [{ text: 'Update', role: 'ok' }],\n      duration, // force toasts to close to trigger the update\n    };\n    const toast = await this._toast.create(data);\n    await toast.present();\n    await toast.onDidDismiss();\n    this.activateUpdate();\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'addressToAvatar'\n})\nexport class AddressToAvatarPipe implements PipeTransform {\n\n  async transform(value?: string, theme: 'jazzicons'|'blockies' = 'blockies'): Promise<string> {\n    if (!value) {\n      return '';\n    }\n    if (theme === 'jazzicons') {\n      // return import('@metamask/jazzicon').then(jazzicon => jazzicon.default( 97, value ));\n      throw 'Not implemented';\n    } else {\n      return import('ethereum-blockies-base64').then(blockies => blockies.default(value));\n    }    \n  }\n\n}","import { Provider } from \"@angular/core\";\nimport { IPiningServiceConfig } from \"@hexa/interfaces\";\nimport { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\nimport { environment } from \"../../environments/environment\";\n\nconst defaultValue: IPiningServiceConfig = {\n  token: environment?.ipfs.pinning_service_token||'',\n  serviceName: 'default-pinata',\n}\n\nexport const API_CONFIG_PROVIDER: Provider[] = [\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_WALLET_SERVICE_APIKEYS),\n    useValue: environment.wallet\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_PINNING_SERVICE_DEFAULT_CONFIG),\n    useValue: defaultValue,\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_AUTH_APIKEY),\n    useValue: environment?.auth?.apikey,\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_HEXA_PUBLICADDRES),\n    useValue: environment?.hexaPublicAddress,\n  }\n]","import { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\n\nimport { DIDService, Web3AuthService, LocalAuthService, LocalDIDServcie } from \"../services\";\nimport { Provider } from '@angular/core';\nimport { environment } from '../../environments/environment';\n\nexport const AUTHENTICATION_PROVIDER: Provider[] = [\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_DID_SERVICE),\n    useClass: (environment?.version?.includes('local')||false) \n      ? LocalDIDServcie \n      : DIDService,\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_WEB3AUTH_SERVICE),\n    useClass: (environment?.version?.includes('local')||false) \n      ? LocalAuthService \n      : Web3AuthService\n  },\n  \n];","import { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\nimport { NotificationService, XMTPService } from \"../services\";\n\nexport const COMMUNICATION_PROVIDER = [\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_MESSAGING_SERVICE),\n    useClass: XMTPService,\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_NOTIFICATION_SERVICE),\n    useClass: NotificationService,\n  },\n];","import { Provider } from \"@angular/core\";\nimport { CeramicClient } from \"@ceramicnetwork/http-client\";\nimport { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\nimport { environment } from \"../../environments/environment\";\nimport { DatastoreService, LocalDatastoreServcie } from \"../services\";\n\nexport const DATABASE_PROVIDER: Provider[] = [\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_CERAMIC_SERVICE),\n    useFactory: () => {\n      const public_node = 'https://ceramic-clay.3boxlabs.com';\n      const hexaCeramicNode = 'http://ec2-35-171-157-60.compute-1.amazonaws.com:7007';\n      const CERAMIC_CLIENT = new CeramicClient(public_node);\n      return (environment?.version?.includes('local')||false) \n        ? null\n        : CERAMIC_CLIENT;\n    },\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_DATASTORE_SERVICE),\n    useClass: (environment?.version?.includes('local')||false)\n      ? LocalDatastoreServcie\n      : DatastoreService\n  },\n];","import { IEncryptionService } from \"@hexa/interfaces\";\nimport { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\nimport { environment } from \"../../environments/environment\";\nimport { DIDEncryptionService, LocalEncryptionService } from \"../services\";\nimport { EncryptionStrategy } from \"../strategies\";\n\nexport const ENCRYPTION_PROVIDER = [\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_DID_ENCRYPTION_SERVICE),\n    useClass: (environment?.version?.includes('local')||false)\n      ? LocalEncryptionService\n      : DIDEncryptionService\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_ENCRYPTION_SERVICE),\n    useFactory: (encryptLib: IEncryptionService): EncryptionStrategy => {\n      // setup default encryption strategy with DID Encryption Service.\n      // You can change this to use a different encryption service \n      // by calling setStrategy() on the EncryptionStrategy instance.\n      const strategy = new EncryptionStrategy();\n      strategy.setStrategy(encryptLib);\n      return strategy;\n    },\n    deps: [getInjectionToken(TOKENS_NAME.APP_DID_ENCRYPTION_SERVICE)],\n  },\n];","import { ErrorHandler } from \"@angular/core\";\nimport { environment } from \"../../environments/environment\";\nimport { GlobalErrorHandlerService } from \"../services\";\n\nexport const ERROR_PROVIDER = environment.production\n  ? [\n      {\n        provide: ErrorHandler,\n        useClass: GlobalErrorHandlerService,\n      },\n    ]\n  : [];","import { EnvironmentProviders, Provider } from \"@angular/core\";\nimport { ERROR_PROVIDER } from \"./error.provider\";\nimport { IS_PROD_PROVIDER } from \"./is-prod.provider\";\nimport { LOADER_PROVIDER } from \"./loader.provider\";\nimport { API_CONFIG_PROVIDER } from \"./api-config.provider\";\nimport { AUTHENTICATION_PROVIDER } from \"./authentication.provider\";\nimport { ENCRYPTION_PROVIDER } from \"./encryption.provider\";\nimport { DATABASE_PROVIDER } from \"./database.provider\";\nimport { COMMUNICATION_PROVIDER } from \"./communication.provider\";\nimport { MEDIA_STORAGE_PROVIDER } from \"./media-storage.provider\";\nimport { PROMPT_STRATEGY_PROVIDER } from \"./strategy.provider\";\n\nexport const PROVIDERS: (Provider | EnvironmentProviders)[]  = [\n  ...PROMPT_STRATEGY_PROVIDER, // zero dependency first\n  ...API_CONFIG_PROVIDER,\n  ...AUTHENTICATION_PROVIDER,\n  ...DATABASE_PROVIDER,\n  ...COMMUNICATION_PROVIDER,\n  ...ENCRYPTION_PROVIDER,\n  ...ERROR_PROVIDER,\n  ...IS_PROD_PROVIDER,\n  ...LOADER_PROVIDER,\n  ...MEDIA_STORAGE_PROVIDER,\n];","import { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\nimport { environment } from \"../../environments/environment\";\n\nexport const IS_PROD_PROVIDER = [\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_IS_PROD),\n    useValue: environment.production,\n  },\n]","import { ILoadingService } from \"@hexa/interfaces\";\nimport { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\nimport { BehaviorSubject, debounceTime, distinctUntilChanged } from \"rxjs\";\n\nexport const LOADER_PROVIDER = [{\n  provide: getInjectionToken(TOKENS_NAME.APP_LOADER_SERVICE),\n  useFactory: (): ILoadingService => {\n    // Create a loader service that can be used to show/hide \n    // a loading indicator in the UI. \n    // This is a simple example that uses a BehaviorSubject to\n    // emit a boolean value that can be subscribed to by the UI.\n    const LOADERCLIENT = new BehaviorSubject<boolean>(false);\n    return {\n      setStatus: (status: boolean) => {\n        console.log('Loader status: ', status);\n        LOADERCLIENT.next(status);\n      },\n      isVisible$: LOADERCLIENT.asObservable().pipe(\n        debounceTime(250),\n        distinctUntilChanged()\n      ),\n    };\n  },\n}];","import { EnvironmentProviders, Provider } from \"@angular/core\";\nimport { IAuthService, IPiningService } from \"@hexa/interfaces\";\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\nimport { environment } from \"../../environments/environment\";\nimport { IPFSService, PinataService, LocalIPFSService } from \"../services\";\nimport { Web3storageService } from \"../services/web3storage.service\";\nimport { IPFSPinningStrategy } from \"../strategies\";\n\nexport const MEDIA_STORAGE_PROVIDER: (Provider | EnvironmentProviders)[]= [\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_PINATA_SERVICE),\n    useClass: PinataService,\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_WEB3STORAGE_SERVICE),\n    useClass: Web3storageService,\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_IPFS_SERVICE),\n    useClass: (environment?.version?.includes('local')||false)\n      ? LocalIPFSService\n      : IPFSService\n  },\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_IPFS_PINNING_SERVICE),\n    useFactory: (authService: IAuthService, pinata: IPiningService, web3: IPiningService) => {\n      // use default service\n      const profil = authService.profile$.value;\n      const serviceName = profil.ipfsConfig?.serviceName;\n      \n      const mapStrategy = new Map();\n      mapStrategy.set('pinata', pinata);\n      mapStrategy.set('web3.storage', web3);\n      \n      const strategy = new IPFSPinningStrategy(mapStrategy);\n      (serviceName) \n        ? strategy.setStrategy<string>(serviceName)\n        : strategy.setStrategy<string>('pinata'); // default service\n      // use local if local\n      return (environment?.version?.includes('local')||false)\n        ? <IPiningService>{\n          pin: async (hash: string) => {\n            console.log(`[LocalIPFSPinningStrategy] pin: ${hash}`);\n          },\n          unpin: async (hash: string) => {\n            console.log(`[LocalIPFSPinningStrategy] unpin: ${hash}`);\n          }\n        }\n        : strategy;\n    },\n    deps: [\n      getInjectionToken(TOKENS_NAME.APP_WEB3AUTH_SERVICE), \n      getInjectionToken(TOKENS_NAME.APP_PINATA_SERVICE),\n      getInjectionToken(TOKENS_NAME.APP_WEB3STORAGE_SERVICE)\n    ],\n  },\n];","import { EnvironmentProviders, Provider } from \"@angular/core\";\nimport { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\nimport { PromptStrategyService } from \"../services/prompt-strategy.service\";\n\nexport const PROMPT_STRATEGY_PROVIDER: (Provider | EnvironmentProviders)[]= [\n  {\n    provide: getInjectionToken(TOKENS_NAME.APP_PROMPT_STRATEGY_SERVICE),\n    useClass: PromptStrategyService,\n  },\n];","import { Inject, Injectable } from \"@angular/core\";\nimport { CeramicClient } from '@ceramicnetwork/http-client';\nimport { DIDDataStore } from '@glazed/did-datastore';\nimport { TileDocument } from '@ceramicnetwork/stream-tile'\nimport { IDatastoreService, IIdentityService } from \"@hexa/interfaces\";\nimport { AlertController, LoadingController, ToastController } from \"@ionic/angular\";\nimport { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\n\n@Injectable()\nexport class DatastoreService implements IDatastoreService<DIDDataStore> {\n  \n  public readonly aliases = {\n    schemas: {\n      basicProfile:\n        'ceramic://k3y52l7qbv1frxt706gqfzmq6cbqdkptzk8uudaryhlkf6ly9vx21hqu4r6k1jqio',\n    },\n    definitions: {\n      BasicProfile:\n        'kjzl6cwe1jw145cjbeko9kil8g9bxszjhyde21ob8epxuxkaon1izyqsu8wgcic',\n    },\n    tiles: {},\n  };\n  private readonly _datastore = new DIDDataStore({ \n    ceramic: this._ceramic, \n    model: this.aliases\n  });\n  get datastore() {\n    return this._datastore;\n  }\n \n  constructor(\n    @Inject(getInjectionToken(TOKENS_NAME.APP_CERAMIC_SERVICE)) private readonly _ceramic: CeramicClient,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_DID_SERVICE)) private readonly _did: IIdentityService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_IS_PROD)) private readonly _isProd: boolean,\n    \n    private readonly _loaderService: LoadingController,\n    private readonly _toastService: ToastController,\n  ) {}\n \n  /**\n   * Wrapper that normalize the object returned by Ceramic database\n   * as a simple object with only the content of the document and the id\n   * This method using DID authentication to load the document with full access (read/write)\n   * @param family \n   * @param tags \n   * @param data \n   * @returns \n   */\n  async getData<T>(family: string, tags: string[], data?: T): Promise<T> {\n    const familyTag = this._isProd ? family : `DEV=${family}`;\n    console.log(`[INFO] {DatastoreService} getData() Query:`, familyTag, tags);    \n    const doc = await this._getDocument<T>(\n      familyTag, \n      tags, \n      data\n    );\n    console.log('[INFO] {DatastoreService} getData() Result: ', doc, doc.id.toString());\n    return {\n      ...doc.content as T,\n      _id: doc.id.toString()\n    };\n  }\n\n  /**\n   * Wrapper that normalize call to load data from Ceramic database\n   * as a simple object with only the content of the document and the id\n   * This method not use authentication and load the document with read only access\n   * @param streamId \n   */\n  async loadData(streamId: string) {\n    const doc = await TileDocument.load(this._ceramic, streamId);\n    return {\n      ...doc,\n      _id: doc.id.toString()\n    };\n  }\n\n  /**\n   * Wrapper that normalize call to save new entry data in Ceramic database\n   * and return the full object of the document\n   * @param data \n   * @param family \n   * @param tags \n   * @returns \n   */\n  async saveData<T>(data: T, family: string, tags: string[]) {\n    const familyTag = this._isProd ? family : `DEV=${family}`;\n    console.log(`[INFO] {DatastoreService} saveData() Query:`, data, familyTag, tags);\n    // Set document controlled by the authenticated DID\n    const controller: string = this._getAuthorizedDidID();\n    if (!controller) throw new Error('Ceramic instance does not have an authenticated DID');\n    // The following call will fail if the Ceramic instance does not have an authenticated DID\n    const doc = await TileDocument.deterministic<T>(\n      this._ceramic, \n      {\n        // A single controller must be provided to reference a deterministic document\n        controllers: [controller],\n        // A family or tag must be provided in addition to the controller\n        family: familyTag,\n        tags,\n      }, \n      {\n        pin: true\n      }\n    );\n    doc.update(data);\n    // const _id = doc.id.toString();\n    // const content = doc.content;\n    return {_id: (data as any)?._id||'temp', ...data};\n  }\n  \n  // async updateUserProfil() {\n    \n  // }\n\n  // private async _init() {}\n\n  /**\n   * Private method that load a document from Ceramic database using deterministic method\n   * and return it as a `TileDocument`\n   * Optionnaly this method can create document content if it does not exist yet and a data object is provided.\n   * @param family \n   * @param tags \n   * @param data \n   * @returns \n   */\n  private async _getDocument<T>(\n    family: string, \n    tags: string[],\n    data?: T, \n  ): Promise<TileDocument<T>> {\n    console.log(`[INFO] {DatastoreService} _getDocument() Query:`, family, tags);\n    // Load the document controlled by the authenticated DID\n    const controller: string = this._getAuthorizedDidID();\n    if (!controller) throw new Error('Ceramic instance does not have an authenticated DID');\n    const doc = await TileDocument.deterministic<T>(this._ceramic, {\n      // A single controller must be provided to reference a deterministic document\n      controllers: [controller],\n      // A family or tag must be provided in addition to the controller\n      family,\n      tags,\n    });\n    // The document has no content as it's created based on metadata only...\n    const haveEmptyContent = doc.content == null || Object.keys(doc.content||{}).length === 0;\n    if (haveEmptyContent && data) {\n      console.log('[INFO] {DatastoreService} No content found, creating new document: ', data); \n      // display message to user\n      const ionLoader = await this._loaderService.create({\n        message: `Creating database document to store your data...`,\n        keyboardClose: false,\n      });\n      await ionLoader.present();\n      // set content with data\n      await doc.update(data);\n      // dismiss message\n      await ionLoader.dismiss();\n      // display toast message\n      const ionToast = await this._toastService.create({\n        message: `Database created successfully`,\n        duration: 2000,\n        color: 'success',\n        position: 'bottom',\n      });\n      ionToast.present();\n    }\n    return doc;\n  }\n\n  private _getAuthorizedDidID() {\n    if (!this._did.did$.value) throw new Error('DIDSession not initialized');\n    // get existing parent DID id or current DID id\n    const id = this._did.did$.value.hasParent\n      ? this._did.did$.value.parent\n      : this._did.did$.value.id;\n    return id;\n  }\n\n  // /**\n  //  * Private method that authorize Ceramic instance by use the DIDSession DID.\n  //  * This method is called before each Ceramic call to ensure that \n  //  * the DIDSession is initialized and the Ceramic instance is authorized to use it.\n  //  */\n  // private _authorizeCeramicWithDID() {\n  //   // set ceramic DID to the one from the DIDSession\n  //   if (!this._didService.did$.value) throw new Error('DIDSession not initialized');\n  //   this._ceramic.did = this._didService.did$.value;\n  //   return this._ceramic?.did?.id;\n  // }\n\n}\n\n\nexport class LocalDatastoreServcie implements IDatastoreService<Storage> {\n  get datastore() {\n    return window.localStorage;\n  }\n\n  async getData<T>(family: string, tags: string[], data?: T): Promise<T> {\n    // check if existing data\n    const key = `${family}:${tags.join(':')}`;\n    const existKey = this.datastore.getItem(key);\n    if (!existKey && data) {\n      const newValue = JSON.stringify(data);\n      this.datastore.setItem(key, newValue);\n    } \n    const value = this.datastore.getItem(key);\n    if (value) {\n      return JSON.parse(value);\n    } else {\n      throw new Error(`No data found for key: ${key}`);\n    }\n  }\n\n  async loadData(streamId: string): Promise<{_id: string;}>{\n    throw new Error('Method not implemented.');\n  }\n\n  async saveData<T>(\n    data: T,\n    family: string,\n    tags: string[]\n  ): Promise<\n    {\n      _id: string;\n    } & T\n  >{\n    const key = `${family}:${tags.join(':')}`;\n    const newValue = JSON.stringify(data);\n    this.datastore.setItem(key, newValue);\n    return {\n      _id: Date.now().toString(),\n      ...data\n    };\n  }\n}","import { Inject, Injectable } from \"@angular/core\";\nimport { IEncryptionService, IIdentityService } from \"@hexa/interfaces\";\nimport { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\nimport { JWE } from 'did-jwt';\n\n// Doc: https://blog.ceramic.network/how-to-store-signed-and-encrypted-data-on-ipfs/   \n\n@Injectable()\nexport class DIDEncryptionService implements IEncryptionService {\n\n  constructor(\n    @Inject(getInjectionToken(TOKENS_NAME.APP_DID_SERVICE)) private readonly _identityService: IIdentityService\n  ){}\n\n  async encryptData(data: string, authorizedDID: string[] = []) {\n    const unit8Data = new TextEncoder().encode(data);\n    const did = this._identityService.did$.value;\n    const didID = this._getAuthorizedDidID();\n    if (!did) throw new Error('{DIDEncryptionService}: DIDSession not initialized');\n    if (!did.createJWE) throw new Error('{DIDEncryptionService}: createJWE not implemented');\n    try {      \n      const jwe = await did.createJWE(\n        unit8Data, \n        // liste of authorized DID ID to decrypt\n        [\n          didID,\n          ...authorizedDID\n        ]\n      ); \n      return jwe;\n    } catch (error: any) {\n      throw new Error(`[ERROR] {DIDEncryptionService}: ${error?.message}`);\n    }\n  }\n\n  async decryptData(jwe: JWE) {\n    const did = this._identityService.did$.value;\n    console.log(`[INFO] {DIDEncryptionService} `, did, jwe);\n    const decryptedJWEunit8Data = await did.decryptJWE(jwe);\n    const decryptedJWE = new TextDecoder().decode(decryptedJWEunit8Data);\n    return decryptedJWE;\n  }\n\n  private _getAuthorizedDidID() {\n    if (!this._identityService.did$.value) throw new Error('DIDSession not initialized');\n    // get existing parent DID id or current DID id\n    const id = this._identityService.did$.value.hasParent\n      ? this._identityService.did$.value.parent\n      : this._identityService.did$.value.id;\n    return id;\n  }\n}\n\n@Injectable()\nexport class LocalEncryptionService implements IEncryptionService {\n  async decryptData(data: any){\n    console.log(`[LocalEncryptionStrategy] decryptData: ${data}`);\n    return data;\n  }\n  encryptData(data: any, authorizedDID: any) {\n    console.log(`[LocalEncryptionStrategy] encryptData: ${data}, ${authorizedDID}`);\n    return data;\n  }\n}","import { Injectable } from \"@angular/core\";\nimport { DID } from '@hexa/dids';\nimport { ethers} from 'ethers';\nimport { BehaviorSubject } from \"rxjs\";\nimport { IIdentityService } from \"@hexa/interfaces\";\nimport { EthereumAuthProvider as ThreeIdAuthProvider, ThreeIdConnect } from '@3id/connect';\nimport { EthereumAuthProvider as EthSelfIDAuthProvider, SelfID } from '@self.id/web';\n\n\n@Injectable()\nexport class DIDService implements IIdentityService {\n  \n  public readonly did$ = new BehaviorSubject<DID>(null as any);\n  private readonly _threeID = new ThreeIdConnect('testnet-clay');\n  private _selfId$ = new BehaviorSubject<SelfID>(null as any);\n\n  async connectWallet(\n    provider: ethers.providers.ExternalProvider = (window as any).ethereum, \n    account: string\n  ) {\n    try {\n      await this._auth(provider, account);\n      return true;\n    } catch (error: any) {\n      this.did$.next(null as any);\n      throw new Error(error.message);\n    }\n  }\n\n  private async _auth(provider: ethers.providers.ExternalProvider = (window as any).ethereum, account: string) {\n    if (!provider) {\n      throw new Error('No injected Ethereum provider found');\n    }\n    await this._authenticateWithEthereum(provider, account);\n  }\n\n  private async _authenticateWithEthereum(\n    ethereumProvider: ethers.providers.ExternalProvider,\n    account: string\n  ) {\n    await this._connectWith3ID(ethereumProvider, account);\n    // await this._saveLatestConnectionDateTime();\n  }\n\n  private async _connectWith3ID(\n    ethereumProvider: ethers.providers.ExternalProvider,\n    account: string\n  ) {\n    // Create an EthereumAuthProvider using the Ethereum provider and requested account\n    const authProvider = new ThreeIdAuthProvider(ethereumProvider, account);\n    // Connect the created EthereumAuthProvider to the 3ID Connect instance so it can be used to\n    // generate the authentication secret\n    await this._threeID.connect(authProvider);\n    const did = new DID({\n      // Get the DID provider from the 3ID Connect instance\n      provider: this._threeID.getDidProvider(),\n\n      // The DID resolver is used to resolve the DID document from the 3ID Connect instance \n      // and the public keys from the Key DID Resolver\n      // resolver: {\n      //   ...get3IDResolver(this._threeID),\n      // }\n    });\n    this.did$.next(did);\n  }\n\n  private async _authWithSelfID(\n    ethereumProvider: ethers.providers.ExternalProvider,\n    account: string\n  ) {\n    const selfID = await SelfID.authenticate({\n      authProvider: new EthSelfIDAuthProvider(ethereumProvider, account),\n      ceramic: 'testnet-clay',\n      // Make sure the `ceramic` and `connectNetwork` parameter connect to the same network\n      connectNetwork: 'testnet-clay',\n      threeidConnect: true\n    });\n    const did = selfID.did;\n    this._selfId$.next(selfID);\n    this.did$.next(did);\n  }\n\n  private async _saveLatestConnectionDateTime() {\n    // const selfId = this._selfId$.value;\n    // await selfId?.set('basicProfile', {\n    //   latestConnectionISODatetime: new Date().toISOString(),\n    // });\n  }\n}\n\n\n@Injectable()\nexport class LocalDIDServcie implements IIdentityService {\n  public readonly did$ = new BehaviorSubject<DID>(null as any);\n  public async connectWallet() {\n    this.did$.next({\n      id: 'did:3:0xlocal',\n      authenticated: true,\n    } as DID);\n    return true;\n  }\n}","import { ErrorHandler, Inject, Injectable, NgZone } from '@angular/core';\nimport { ILoadingService } from '@hexa/interfaces';\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\nimport { AlertController, LoadingController } from '@ionic/angular';\n\n@Injectable()\nexport class GlobalErrorHandlerService implements ErrorHandler {\n\n  constructor(\n    private readonly _alertService: AlertController,\n    private _zone: NgZone,\n    private readonly _loadingCtrl: LoadingController,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_LOADER_SERVICE)) private readonly _loaderService: ILoadingService,\n  ) { }\n\n  async handleError(error: any) {\n    let message = error.message || error;\n    // get message error from Unkown Promise Error\n    if (message.indexOf('Uncaught (in promise):') !== -1) {\n      message = message.split('Uncaught (in promise):')[1].trim();\n    }\n    console.error('[ERROR] GlobalErrorHandler: ', error.message);\n    // use `NgZone.run`, too update loader state even if the error is thrown outside the ngZone\n    this._zone.run(async () =>  {\n      this._loaderService.setStatus(false);\n      // close existing loader UI ctrl \n      const existingLoader = await this._loadingCtrl.getTop();\n      if (existingLoader) {\n        await existingLoader.dismiss();\n      }\n      // close existing alert\n      const existingAlert = await this._alertService.getTop();\n      if (existingAlert) {\n        await existingAlert.dismiss();\n      }\n      // show alert\n      const appAlert = await this._alertService.create({\n        header: 'Error',\n        message,\n        buttons: ['OK'],\n        cssClass: 'app-alert danger',\n      });\n      await appAlert.present();\n    });\n  }\n}","export * from './datastore.service';\nexport * from './did.service';\nexport * from './did-encryption.service';\nexport * from './global-error-handler.service';\nexport * from './ipfs.service';\nexport * from './xmtp.service';\nexport * from './notification.service';\nexport * from './pinata.service';\n// export * from './nacl.service';\nexport * from './web3-auth.service';","import { Injectable } from '@angular/core';\nimport { create, IPFS  } from 'ipfs-core';\nimport { BehaviorSubject } from 'rxjs';\nimport { CID } from 'multiformats/cid';\nimport { DagAPI, IIPFSService, IPiningService } from '@hexa/interfaces';\n\n@Injectable()\nexport class IPFSService implements IIPFSService {\n  private _ipfsNode!: IPFS;\n  private readonly dag$: BehaviorSubject<DagAPI> = new BehaviorSubject<DagAPI>(null as any);\n\n  async disconect() {\n    if (this._ipfsNode.dag) {\n      await this._ipfsNode.stop();\n    }\n  }\n\n  async add(file: File | Blob, s?: IPiningService) {\n    if (!this._ipfsNode) {\n      this._ipfsNode = await create({\n        config: {},\n      });\n    }\n    const nodeIsOnline = this._ipfsNode.isOnline();\n    if (!nodeIsOnline) {\n      throw new Error('IPFS node is not online');\n    }\n    const { cid } = await this._ipfsNode.add(file, {\n      timeout: 10000,\n      preload: false,\n      progress: (prog: any) => console.log(`received: ${prog}`),\n    });\n    if (s) {\n      await s.pin(cid.toString());\n    }\n    return {\n      cid: cid.toString(),\n    };\n  }\n\n  async pin(s: IPiningService, cid: string) {\n    await s.pin(cid);\n  }\n\n  async unpin(s: IPiningService ,cid: string) {\n    await s.unpin(cid);\n  }\n\n  async getFromCID(cid: string, type?: string): Promise<File> {\n    if (!this._ipfsNode) {\n      this._ipfsNode = await create();\n    }\n    const nodeIsOnline = this._ipfsNode.isOnline();\n    if (!nodeIsOnline) {\n      throw new Error('IPFS node is not online');\n    }\n    const asyncUint8Array = this._ipfsNode.cat(cid, {\n      timeout: 10000,\n      preload: false,\n    });\n    const blobsPart = [];\n    for await (const chunk of asyncUint8Array) {\n      blobsPart.push(chunk);\n    }\n    const file = new File(blobsPart, cid, { type });\n    return file;\n  }\n\n  async getDag(): Promise<DagAPI> {\n    if (!this._ipfsNode) {\n      this._ipfsNode = await create({\n        config: {},\n      });\n    }\n    const nodeIsOnline = this._ipfsNode.isOnline();\n    if (!nodeIsOnline) {\n      throw new Error('IPFS node is not online');\n    }\n    if (!this.dag$.value) {\n      this.dag$.next(this._ipfsNode.dag);\n    }\n    return this.dag$.value;\n  }\n\n  cidFromString(id: string) {\n    return CID.parse(id);\n  }\n\n}\n\n\n@Injectable()\nexport class LocalIPFSService implements IIPFSService {\n  async disconect(){\n    console.log('disconect');\n  }\n\n  async add(file: File | Blob): Promise<{\n    cid: string;\n  }>{\n    // get local drive database from localStorage\n    const existingKey = localStorage.getItem('local:hexa:drive:ipfs');\n    let existingData: any = {};\n    if (existingKey) {\n      existingData = JSON.parse(existingKey);\n    }\n    // store file as base64 to local storage\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    const cid: string = await new Promise((resolve, reject) => {\n      reader.onload = () => {\n        const name = (file as any)?.name||'filename';\n        const base64 = reader.result?.toString();\n        existingData[name] = base64;\n        localStorage.setItem('local:hexa:drive:ipfs', JSON.stringify(existingData));\n        resolve(name)\n      };\n      reader.onerror = (error) => {\n        console.log('Error: ', error);\n        reject(error as any);\n      };\n    });\n    return {\n      cid\n    }\n  }\n\n  async getFromCID(cid: string, type?: string): Promise<File>{\n    const existingKey = localStorage.getItem('local:hexa:drive:ipfs');\n    let existingData: any = {};\n    if (existingKey) {\n      existingData = JSON.parse(existingKey);\n    }\n    const base64 = existingData[cid];\n    // create file from base64\n    const response = await fetch(base64);\n    const blob = await response.blob();\n    const file = new File([blob], cid, { type });\n    return file;\n  }\n\n  async getDag(): Promise<any> {\n    return {\n      put: async (node: [key: string, value: any]) => {\n        // get local drive database from localStorage\n        const existingKey = localStorage.getItem('local:hexa:drive:ipfs');\n        let existingData: any = {};\n        if (existingKey) {\n          existingData = JSON.parse(existingKey);\n        }\n        const cid = 'cid-' + Date.now();\n        existingData[cid] = JSON.stringify(node);\n        localStorage.setItem('local:hexa:drive:ipfs', JSON.stringify(existingData));\n        return {\n          cid: {\n            toString: () => cid\n          }\n        }\n      },\n      get: async (cid: any) => {\n        // get local drive database from localStorage\n        const existingKey = localStorage.getItem('local:hexa:drive:ipfs');\n        let existingData: any = {};\n        if (existingKey) {\n          existingData = JSON.parse(existingKey);\n        }\n        const value = existingData[cid] as string;\n        return {\n          value \n        }\n      },\n    };\n  }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { IAuthService, IMessagingService, INotificationService } from '@hexa/interfaces';\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\nimport { LoadingController } from '@ionic/angular';\nimport { debounceTime, map, tap } from 'rxjs';\n\n@Injectable()\nexport class NotificationService implements INotificationService {\n  public readonly notifications$ = this._messagingService.messages$.pipe(\n    // formating messages to be displayed\n    map((messages) =>\n      messages\n        .map((message) => message.messagesInConversation)\n        .flat()\n        // filter only application messages\n        .filter((m) => m.content.startsWith('hexa'))\n        // parse message\n        .map((m) => this._parseMessage(m.content))\n\n    ),\n    debounceTime(1000),\n    // update the user profil `latestNotifedISODatetime` field\n    // each time a new notification is received from XMTP\n    tap((messages) =>\n      messages.length > 0\n        ? this._authService\n          .updateProfilData({\n              latestNotifedISODatetime: new Date().toISOString(),\n            })\n            .then(() =>\n              console.log(\n                '[INFO] {NOTIFService} User profil `latestNotifedISODatetime` updated'\n              )\n            )\n        : null\n    ),\n    // update user `sharedDocument` list data\n    tap((messages) => {\n      // TODO: update user `sharedDocument` list data using `CeramicService`\n    }),\n    // clear `messages` BehaviorSubject after XXXXms\n    // to avoid displaying the same messages twice\n    tap((messages) => {\n      if (messages.length > 0) {\n        // clear messages\n        const t = setTimeout(() => {\n          this._messagingService.messages$.next([]);\n          clearTimeout(t);\n        }, 2500);\n      }\n    })\n  );\n  public readonly isConnected$ = this._messagingService.isConnected$;\n\n  constructor(\n    private readonly _loaderCtrl: LoadingController,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_MESSAGING_SERVICE)) private readonly _messagingService: IMessagingService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_WEB3AUTH_SERVICE)) private readonly _authService: IAuthService\n  ) {}\n\n  async connect() {\n    const ionLoading = await this._loaderCtrl.create({\n      message: `Waiting signature from your wallet to enable notifications...`,\n    });\n    await ionLoading.present();\n    await this._messagingService.connect().catch((error) => {\n      ionLoading.dismiss();\n      throw error;\n    });\n    await ionLoading.dismiss();\n    await this._messagingService.loadDatas();\n  }\n\n  async disconnect() {\n    await this._messagingService.disconnect();\n  }\n\n  async sendNotification(\n    metaData: any,\n    senderAddress: string,\n    destinationAddress: string,\n    filterKey: string\n  ) {\n    // formating message\n    const messageData: any = {\n      metaData,\n      senderAddress,\n      createdISODateTime: new Date().toISOString(),\n    };\n    // encoding message\n    const base64Data = `hexa/${filterKey}:${btoa(\n      JSON.stringify(messageData)\n    )}`;\n    // send message\n    await this._messagingService.sendMessage({\n      destinationAddress,\n      message: base64Data,\n    });\n    console.log('[INFO] {NotificationService} message sent: ', base64Data);\n  }\n\n  private _parseMessage(value: string) {\n    const base64Message = value.replace('hexa/', '');\n    const [prefixKey, ...b64messageArray] = base64Message.split(':');\n    const jsonMessage = atob(b64messageArray.toString());\n    let message;\n    let dataMessage: { metaData?: any; senderAddress?: string };\n    try {\n      dataMessage = JSON.parse(jsonMessage);\n    } catch (error) {\n      message = 'Error while parsing message';\n      console.log('[ERROR] {NotificationService} _parseMessage: ', error);\n      return message;\n    }\n    switch(true) {\n      case prefixKey === 'drive':\n        message = `You have a new shared document from ${dataMessage.senderAddress}`;\n        break;\n      case prefixKey === 'calendar':\n        message = `You have a new shared event from ${dataMessage.senderAddress}`;\n        break;\n      case prefixKey === 'note':\n        message = `You have a new shared note from ${dataMessage.senderAddress}`;\n        break;\n      default:\n        message = 'You have a new notification';\n    }\n    return message;\n  }\n}","import { inject, Injectable } from '@angular/core';\nimport {\n  IAuthService,\n  IPiningService,\n  IPiningServiceConfig,\n} from '@hexa/interfaces';\nimport { firstValueFrom } from 'rxjs';\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\n\n@Injectable()\nexport class PinataService implements IPiningService {\n  private readonly defaultConfig = inject<IPiningServiceConfig>(\n    getInjectionToken(TOKENS_NAME.APP_PINNING_SERVICE_DEFAULT_CONFIG)\n  );\n  private readonly authService = inject<IAuthService>(\n    getInjectionToken(TOKENS_NAME.APP_WEB3AUTH_SERVICE)\n  );\n\n  async pin(cid: string) {\n    const profile = await firstValueFrom(this.authService.profile$);\n    const url = 'https://api.pinata.cloud/pinning/pinByHash';\n    const token = profile?.ipfsConfig?.token || this.defaultConfig.token;\n    if (!url || !token) {\n      throw new Error('Pinata IPFS pinning service is not configured');\n    }\n    const body = JSON.stringify({\n      hashToPin: cid,\n    });\n    const config: RequestInit = {\n      method: 'POST',\n      body,\n      headers: new Headers({\n        Authorization: `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      }),\n    };\n    await fetch(url, config)\n      .then((res) => res.json())\n      .catch((err) => {\n        throw err;\n      });\n  }\n\n  async unpin(cid: string) {\n    const profile = await firstValueFrom(this.authService.profile$);\n    const url = `https://api.pinata.cloud/pinning/unpin/${cid}`;\n    const token = profile?.ipfsConfig?.token || this.defaultConfig.token;\n    if (!url || !token) {\n      throw new Error('Pinata IPFS pinning service is not configured');\n    }\n    const config: RequestInit = {\n      method: 'DELETE',\n      headers: new Headers({\n        Authorization: `Bearer ${token}`,\n      }),\n    };\n    await fetch(url, config).catch((err) => {\n      throw err;\n    });\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { IPromptStrategyService } from \"@hexa/interfaces\";\nimport { AlertController } from \"@ionic/angular\";\n\n@Injectable()\nexport class PromptStrategyService implements IPromptStrategyService  {\n  \n  async askSetupService(ops?: {token: string, serviceName: string}): Promise<{token: string, serviceName: string}|undefined> {\n    const { token, serviceName } = ops || {}; \n    const userWantSetup = await this._promptInfos().then(r => r === 'ok');\n    if (!userWantSetup) {\n      return;\n    }\n    const {role, data: {values: selectedService} = {}} = await this._promptSelectService({\n      serviceName,\n    });\n    if (!selectedService || role !== 'ok') {\n      return;\n    }\n    const {data: {values: apiConfig}, role: promptAPIKeys} = await this._promptAPIKeys({\n      serviceName: selectedService,\n      token: selectedService === serviceName ? token : undefined,\n    });\n    if (promptAPIKeys !== 'ok') {\n      return;\n    }\n    return  {...apiConfig, serviceName: selectedService};\n  }\n\n  private async _promptInfos() {\n    const ctrl = new AlertController();\n    const alertUI = await ctrl.create({\n      header: `Configure pinning service`,\n      subHeader: `This app is using IPFS to store your data and delegate to external service to pin your data on the IPFS network.`,\n      message: 'Do you want to configure the pinning service with your own account? If not, the default service will be used and your data will be stored on the IPFS network and pinned by the default service but this will not guarantee the long term availability of your data.',\n      buttons: [\n        { text: 'No', role: 'cancel' },\n        { text: 'Yes', role: 'ok' }\n      ]\n    });\n    await alertUI.present();\n    const { role } = await alertUI.onDidDismiss();\n    return role;\n  }\n\n  private async _promptSelectService(ops?: {serviceName?: 'pinata' | 'web3.storage' | string}) {\n    const checked = ops?.serviceName || 'pinata';\n    const ctrl = new AlertController();\n    const alertUI = await ctrl.create({\n      header: `Select pinning service`,\n      message: `You can select the pinning service you want to use to pin your data on the IPFS network. If you don't know what to choose, just \"Pinata\" the default service and go create an account on <a href=\"https://pinata.cloud\" target=\"_blank\">https://pinata.cloud</a>. to get your own API key.`,\n      inputs: [\n        {\n          name: 'pinata',\n          type: 'radio',\n          label: 'Pinata',\n          value: 'pinata',\n          checked: checked === 'pinata',\n        },\n        {\n          name: 'web3.storage',\n          type: 'radio',\n          label: 'Web3.Storage',\n          value: 'web3.storage',\n          checked: checked === 'web3.storage',\n        },\n      ],\n      mode: 'ios',\n      buttons: [\n        { text: 'Cancel', role: 'cancel' },\n        { text: 'Ok', role: 'ok' }\n      ]\n    });\n    await alertUI.present();\n    return await alertUI.onDidDismiss();\n  }\n\n  private async _promptAPIKeys(ops?: {serviceName: 'pinata' | 'web3.storage', token?: string}) {\n    const {serviceName, token: value = ''} = ops || {};\n    const availableService = [\n      {name:'pinata', url: 'https://pinata.cloud'}, \n      {name: 'web3.storage', url: 'https://web3.storage/'}\n    ];\n    const urlAPI = availableService.find(s => s.name === serviceName)?.url;\n    const ctrl = new AlertController();\n    const alertUI = await ctrl.create({\n      header: `Configure pinning service`,\n      subHeader: `Please enter your API keys to configure the pinning service.`,\n      message: `You can get it by creating an free account on <a href=\"${urlAPI}\" target=\"_blank\">${urlAPI}</a>.`,\n      inputs: [\n        { \n          name: 'token',\n          type: 'text',\n          placeholder: 'API Token',\n          value,\n        },\n      ],\n      buttons: [\n        { text: 'Cancel', role: 'cancel' },\n        { text: 'Ok', role: 'ok' }\n      ]\n    });\n    await alertUI.present();\n    return await alertUI.onDidDismiss();\n  }\n} ","import { Inject, Injectable } from '@angular/core';\nimport { ethers } from 'ethers';\nimport { Magic } from 'magic-sdk';\nimport { WebAuthnExtension } from '@magic-ext/webauthn';\nimport { recoverPersonalSignature } from \"@metamask/eth-sig-util\";\nimport { BehaviorSubject} from 'rxjs';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  IAuthService,\n  IDatastoreService,\n  IIdentityService,\n  IAuthUser,\n  IAuthGuardService,\n  IMessagingService,\n} from '@hexa/interfaces';\nimport { CeramicClient } from '@ceramicnetwork/http-client';\nimport { getResolver as get3IDResolver } from '@ceramicnetwork/3id-did-resolver';\nimport { DIDDataStore } from '@glazed/did-datastore';\nimport { Caip10Link } from '@ceramicnetwork/stream-caip10-link';\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\nimport { hashMessage } from '@ethersproject/hash';\n\nconst DB_NAME = 'hexa';\nconst MAINNET_RPC_URL = 'https://rpc.ankr.com/eth';\n\n@Injectable()\nexport class Web3AuthService implements IAuthService, IAuthGuardService {\n  public readonly ethereumProvider$: BehaviorSubject<ethers.providers.Web3Provider> =\n    new BehaviorSubject(null as any);\n  public readonly signer$: BehaviorSubject<ethers.providers.JsonRpcSigner> =\n    new BehaviorSubject(null as any);\n  public readonly account$: BehaviorSubject<string> = new BehaviorSubject(\n    null as any\n  );\n  public readonly profile$: BehaviorSubject<IAuthUser> = new BehaviorSubject(\n    null as any\n  );\n  public readonly magic = this._magicWeb3();\n  public readonly did$ = this._did.did$;\n  public isWaiting$ = new BehaviorSubject(false); // used by app guard to prevent navigation while waiting for wallet connection\n\n  constructor(\n    private readonly _router: Router,\n    private readonly _route: ActivatedRoute,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_MESSAGING_SERVICE))\n    private readonly _msgService: IMessagingService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_DID_SERVICE))\n    private readonly _did: IIdentityService,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_CERAMIC_SERVICE))\n    private readonly _ceramic: CeramicClient,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_DATASTORE_SERVICE))\n    private readonly _datastore: IDatastoreService<DIDDataStore>,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_AUTH_APIKEY)) \n    private readonly _authApiKey: string,\n  ) {\n  }\n\n  async connect(accountToConnect?: string) {\n    this.isWaiting$.next(true);\n    const provider = await this.magic.wallet.getProvider();\n    const ethersProvider = new ethers.providers.Web3Provider(\n      provider as any,\n      'any'\n    );\n    let account = accountToConnect;\n    if (!accountToConnect) {\n      const accounts = await this.magic.wallet.connectWithUI();\n      account = accounts[0];\n      // set local storage to remember connected wallets\n      window.localStorage.setItem('connectedWallets', JSON.stringify(accounts));\n    }\n    if (!account) {\n      throw new Error('No account found.');\n    }\n    // Listen for events\n    ethersProvider.on('accountsChanged', event => console.log(`[INFO] {Web3AuthService} connect() - accountsChanged: `, event));\n    ethersProvider.on('chainChanged', event => console.log(`[INFO] {Web3AuthService} connect() - chainChanged: `, event));\n    \n    // const {account, provider} = await this._connectWithMagic(accountToConnect);\n    \n    // // connect with metamask\n    // const ethAccounts = await ethersProvider.send('eth_accounts', []);\n    // if (ethAccounts[0] !== account) {\n    //   throw new Error(`[ERROR] {Web3AuthService} connect() - Account and ethers account are not the same.`);\n    // }\n    console.log('[INFO] {Web3AuthService} connect() - Connected: ', { account, ethersProvider});\n    // const signer = ethersProvider.getSigner(account);\n    // console.log(`Signer: `, signer);\n    \n    // verify signature\n    const message = 'hexa authentication with wallet signature.';\n    const {result = undefined} = await provider.send(\n      'personal_sign', [message, account, 'Random text']\n    );\n    console.log('[INFO] {Web3AuthService} connect() - Sign: ', result);\n    const recoveredAddress = ethers.utils.recoverAddress(hashMessage(message), result);\n    console.log('[INFO] {Web3AuthService} connect() - Recovered address: ', recoveredAddress);\n    const isValidSignature = recoveredAddress.toLocaleLowerCase() === account.toLocaleLowerCase();\n    // const isOwner = await this.signAndVerify(signer, account);\n    if (!isValidSignature) {\n      this.isWaiting$.next(false);\n      await this.disconnect();\n      throw new Error('User is not owner of this wallet. Unable to verify signature.');\n    }\n    await this._connectDID(provider as any, account);\n    console.log('[INFO] Connected DID with Ethers provider:', {ethersProvider});\n    // update profile or set default profile if not exist\n    await this.updateProfilData({\n      latestConnectionISODatetime: new Date().toISOString(),\n    });\n    console.log('[INFO] Updated user profil data.');\n    // update state\n    this.ethereumProvider$.next(ethersProvider);\n    this.signer$.next(ethersProvider.getSigner());\n    this.account$.next(account);\n    this.isWaiting$.next(false);\n    // try listen events wallet\n    ethersProvider.on('accountsChanged', async (accounts: string[]) => {\n      console.log('[INFO] Accounts changed', accounts);\n      await this.disconnect();\n    });\n    ethersProvider.on(\"network\", async (newNetwork, oldNetwork) => {\n      // When a Provider makes its initial connection, it emits a \"network\"\n      // event with a null oldNetwork along with the newNetwork. So, if the\n      // oldNetwork exists, it represents a changing network\n      if (oldNetwork) {\n        await this.disconnect();\n      }\n    });\n    await this._connectOthersServices();\n    return Boolean(account)\n  }\n\n  async connectWallet(address: string): Promise<boolean> {\n    return this.connect(address);\n  }\n\n  async disconnect() {\n    console.log('[INFO] Disconnecting wallet');\n    window.localStorage.removeItem('connectedWallets');\n    this.signer$.next(null as any);\n    this.account$.next(null as any);\n    this.profile$.next(null as any);\n    this._did.did$.next(null as any);\n    // this.unsubscribe();\n    await this.magic.wallet.disconnect();\n    this._redirectToRoot();\n    this.isWaiting$.next(false);\n  }\n\n  async getAccountDID(\n    address: string,\n    chainParam = 'eip155:1'\n  ): Promise<string> {\n    const link = await Caip10Link.fromAccount(\n      this._ceramic,\n      `${address}@${chainParam}`\n    );\n    if (link.did == null) {\n      throw new Error(`No DID found for ${address}`);\n    }\n    return link.did;\n  }\n\n  async signAndVerify(signer: ethers.providers.JsonRpcSigner, account: string) {\n    const message = 'hexa authentication with wallet signature.';\n    const signedMessage = await signer.signMessage(message).catch(async (error) => {\n      console.log('[ERROR] {Web3AuthService} signAndVerify() - Error while signing message: ', error);\n      await this.disconnect();\n      throw error;\n    });\n    // recover the public address of the signer to verify\n    // const recoveredAddress = recoverPersonalSignature({\n    //   data: message,\n    //   signature: signedMessage,\n    // });\n    const recoveredAddress = ethers.utils.verifyMessage(message, signedMessage)\n    return recoveredAddress.toLocaleLowerCase() === account.toLocaleLowerCase();\n  };\n\n  private async _connectDID(\n    provider: ethers.providers.ExternalProvider | undefined,\n    accountAddress: string\n  ) {\n    console.log('[INFO] Connect DID...');\n    // connect DID service\n    const isDIDConnected = await this._did\n      .connectWallet(provider, accountAddress)\n      .then(() => true)\n      .catch((error) => error as Error);\n    // set resolver\n    console.log('[INFO] Set resolver');\n    const resolvers = { ...get3IDResolver(this._ceramic) };\n    const did = this._did.did$.value;\n    did.setResolver(resolvers as any);\n    console.log('[INFO] Authenticate with DID provider');\n    // Authenticate the DID using the 3ID provider from 3ID Connect, this will trigger the\n    // authentication flow using 3ID Connect and the Ethereum provider\n    const isAuth = await did.authenticate();\n    this._ceramic.did = did;\n    console.log('[INFO] DID ', isAuth);\n    // throw error if DID connection failed\n    if (!isDIDConnected || isDIDConnected instanceof Error) {\n      await this.disconnect();\n      this.isWaiting$.next(false);\n      throw Error(\n        isDIDConnected instanceof Error\n          ? isDIDConnected.message || 'Could not connect wallet to DID service.'\n          : 'Could not connect wallet to DID service.'\n      );\n    }\n  }\n\n  // private async _connectWithMagic(accountToConnect?: string) {\n  //   const provider = await this.magic.wallet.getProvider();\n  //   if (accountToConnect) {\n  //     return {\n  //       account: accountToConnect, \n  //       provider\n  //     }\n  //   }\n  //   const accounts = await this.magic.wallet.connectWithUI();\n  //   const account = accounts[0];\n\n  //   const info = await this.magic.wallet.getInfo();\n  //   console.log('[INFO] {Web3AuthService} _connectWithMagic() - Connected with Magic: ', {accounts, provider, info});\n  //   // set local storage\n  //   window.localStorage.setItem('connectedWallets', JSON.stringify(accounts));\n  //   return {\n  //     account, \n  //     provider\n  //   }\n  // }\n\n  private _magicWeb3() {\n    const customNodeOptions = this._getRPCNodeOptions();\n    console.log(`[INFO] {Web3AuthService} _magicWeb3() - Create MagicWeb3 instance with node params: `, customNodeOptions);\n    const magic = new Magic(this._authApiKey, {\n      network: customNodeOptions, // 'mainnet', // or your own custom node url in the format of { rpcUrl: string chainId: number }\n      extensions: [new WebAuthnExtension()],\n    });\n    return magic;\n  }\n\n  private _getRPCNodeOptions() {\n    const RPC_NODE_OPTIONS = [\n      {\n        rpcUrl: MAINNET_RPC_URL, // your ethereum, polygon, or optimism mainnet/testnet rpc URL\n        chainId: 1 // corresponding chainId for your rpc url\n      },\n      {\n        rpcUrl: 'https://rpc.ankr.com/eth_goerli', // your ethereum, polygon, or optimism mainnet/testnet rpc URL\n        chainId: 5 // corresponding chainId for your rpc url\n      },\n      {\n        rpcUrl: 'https://rpc.ankr.com/polygon', // or https://matic-mumbai.chainstacklabs.com for testnet\n        chainId: 137 // or 80001 for polygon testnet\n      },\n      {\n        rpcUrl: 'https://rpc.ankr.com/polygon_mumbai',\n        chainId: 80001\n      }\n    ];\n    const defaultChainId = 1;\n    const {chainId = defaultChainId} = (window as any)?.ethereum||{};\n    const chainIdAsDecimal = Number(BigInt(chainId).toString());\n    const nodeOps =  RPC_NODE_OPTIONS.find(n => n.chainId === chainIdAsDecimal);\n    if (!nodeOps) {\n      throw new Error('RPC Node config fail. Incorect params, ');\n    }\n    return nodeOps;\n  }\n\n  /**\n   * Method that check the current route and redirect to root if the route is not the root\n   */\n  private async _redirectToRoot() {\n    if (this._router.url !== '/') {\n      await this._router.navigateByUrl('/');\n    }\n  }\n\n  private async _connectOthersServices() {\n    const { latestConnectionISODatetime, latestNotifedISODatetime } =\n      await this.getProfilData();\n    const mostRecentDate = [\n      latestConnectionISODatetime,\n      latestNotifedISODatetime,\n    ]\n      .filter(Boolean)\n      .sort(\n        (a, b) =>\n          (b ? new Date(b).getTime() : new Date().getTime()) -\n          (a ? new Date(a).getTime() : new Date().getTime())\n      )\n      .shift();\n    // build options for xmtp messages fetching\n    // this will only return messages that are newer than the `mostRecentDate` constante\n    const opts = mostRecentDate\n      ? {\n          startTime: new Date(mostRecentDate),\n          endTime: new Date(),\n        }\n      : undefined;\n    const provider = this.ethereumProvider$.value;\n    // this will only init the service and not connect the wallet\n    if (this._msgService.init) {\n      await this._msgService.init(provider, {\n        ...opts,\n        // startTime: new Date('2023-01-01'),\n      });\n    }\n  }\n\n  async getProfilData(): Promise<IAuthUser> {\n    const profil = await this._datastore.getData(\n      DB_NAME, // database name\n      ['basicProfile'], // datbase collections\n      // default values if database is empty\n      {\n        latestConnectionISODatetime: new Date('2000-01-01').toISOString(),\n        latestNotifedISODatetime: new Date('2000-01-01').toISOString(),\n        creationISODatetime: new Date().toISOString(),\n      }\n    );\n    this.profile$.next(profil);\n    return profil;\n  }\n\n  async updateProfilData(data: Partial<IAuthUser>): Promise<IAuthUser> {\n    const profil = this.profile$.value || (await this.getProfilData());\n    const result = await this._datastore.saveData(\n      {\n        ...profil,\n        ...data,\n      },\n      DB_NAME, // database name\n      ['basicProfile'] // datbase collections,\n    );\n    this.profile$.next(result);\n    return result;\n  }\n}\n\n\n@Injectable()\nexport class LocalAuthService implements IAuthService, IAuthGuardService {\n  ethereumProvider$ = new BehaviorSubject<any>(null);\n  signer$ = new BehaviorSubject<any>(null);\n  account$ = new BehaviorSubject<any>(null as any);\n  profile$ = new BehaviorSubject<IAuthUser>(null as any);\n  did$ = this._did.did$;\n  isWaiting$ = new BehaviorSubject(false)\n\n  constructor(\n    private readonly _router: Router,\n    @Inject(getInjectionToken(TOKENS_NAME.APP_DID_SERVICE))\n    private readonly _did: IIdentityService,  \n  ) {\n    console.log('[INFO]: LocalAuthService');\n  }\n\n  private _setLocalUser() {\n    this.account$.next('0xlocal');\n    this.profile$.next({\n      latestConnectionISODatetime: new Date().toISOString(),\n      latestNotifedISODatetime: new Date().toISOString(),\n      creationISODatetime: new Date().toISOString(),\n    });\n  }\n\n  async connectWallet(address: string) {\n    return this.connect(address);\n  }\n\n  async connect(accountToConnect?: string): Promise<boolean> {\n    await this._did.connectWallet(undefined, accountToConnect||'');\n    this._setLocalUser();\n    if (this.account$.value) {\n      window.localStorage.setItem('connectedWallets', JSON.stringify([this.account$.value]));\n    }\n    return true;\n  }\n  \n  async disconnect(): Promise<void> {\n    // reset local user\n    this.account$.next(null as any);\n    this.profile$.next(null as any);\n    this.did$.next(null as any);\n    // reset local storage\n    window.localStorage.removeItem('connectedWallets');\n    this._redirectToRoot();\n    console.log('disconnect');    \n  }\n  async getAccountDID(address: string, chainParam?: string): Promise<string>{\n    return `did:3:${address}`;\n  }\n  async getProfilData(): Promise<IAuthUser> {\n    return this.account$.value;\n  }\n\n  async updateProfilData(data: Partial<IAuthUser>): Promise<IAuthUser> {\n    return {\n      latestConnectionISODatetime: new Date().toISOString(),\n      latestNotifedISODatetime: new Date().toISOString(),\n      creationISODatetime: new Date().toISOString(),\n      ...data\n    }\n  }\n\n    /**\n   * Method that check the current route and redirect to root if the route is not the root\n   */\n    private async _redirectToRoot() {\n      if (this._router.url !== '/') {\n        await this._router.navigateByUrl('/');\n      }\n    }\n}\n","import { inject, Injectable } from \"@angular/core\";\nimport { IPiningService, IAuthService } from \"@hexa/interfaces\";\nimport { getInjectionToken, TOKENS_NAME } from \"@hexa/token-injection\";\nimport { firstValueFrom } from \"rxjs\";\n\n@Injectable()\nexport class Web3storageService implements IPiningService {\n\n  private readonly _authService = inject<IAuthService>(getInjectionToken(TOKENS_NAME.APP_WEB3AUTH_SERVICE));\n\n  async pin(cid: string) {\n    const profile = this._authService.profile$.value;\n    const token = profile?.ipfsConfig?.token;\n    const url = 'https://api.web3.storage/pins';\n    if (!url || !token) {\n      throw new Error('IPFS pinning service is not configured');\n    }\n    const body = JSON.stringify({\n      \"cid\": cid\n    });\n    const config: RequestInit = {\n      method: 'POST',\n      body,\n      headers: new Headers({ \n        'Authorization': `Bearer ${token}`, \n        'Content-Type': 'application/json'\n      })\n    };\n    await fetch(url, config)\n      .then(res => res.json())\n      .catch(err => {\n        throw err;\n      });   \n  }\n\n  async unpin(cid: string) {\n    const profile = this._authService.profile$.value;\n    const token = profile?.ipfsConfig?.token;\n    const url = `https://api.web3.storage/pins'/${cid}`;\n    if (!url || !token) {\n      throw new Error('IPFS pinning service is not configured');\n    }\n    const config: RequestInit = {\n      method: 'DELETE',\n      headers: new Headers({ \n        'Authorization': `Bearer ${token}`, \n      })\n    };\n    await fetch(url, config)\n      .catch(err => {\n        throw err;\n      });\n  }\n\n}","import { inject, Injectable } from '@angular/core';\nimport {\n  Client,\n  Conversation,\n  DecodedMessage,\n  ListMessagesOptions,\n} from '@xmtp/xmtp-js';\nimport { BehaviorSubject, map } from 'rxjs';\nimport { ethers } from 'ethers';\nimport { IBaseMessage, IMessagingService } from '@hexa/interfaces';\nimport { getInjectionToken, TOKENS_NAME } from '@hexa/token-injection';\n\nexport type XMTPConversation = Conversation;\nexport type XMTPConversationMessage = DecodedMessage;\n\nexport type IXMTPMessage = IBaseMessage<XMTPConversation, XMTPConversationMessage>;\n\n@Injectable()\nexport class XMTPService implements IMessagingService {\n  public readonly messages$: BehaviorSubject<IXMTPMessage[]> =\n    new BehaviorSubject<IXMTPMessage[]>([]);\n  private _web3Provider!: ethers.providers.Web3Provider;\n  private _ops: {\n    startTime: Date;\n    endTime: Date;\n} | undefined = undefined;\n  private readonly _conversations: BehaviorSubject<Conversation[]> =\n    new BehaviorSubject<Conversation[]>([]);\n  private readonly _xmtp: BehaviorSubject<Client> = new BehaviorSubject<Client>(\n    null as any\n  );\n  public readonly isConnected$ = this._xmtp.asObservable().pipe(\n    map((xmtp) => Boolean(xmtp))\n  );\n  private readonly _isProduction = inject<boolean>(getInjectionToken(TOKENS_NAME.APP_IS_PROD));\n\n  async init(web3Provider: ethers.providers.Web3Provider, ops: {\n    startTime: Date;\n    endTime: Date;\n} | undefined = undefined) {\n    this._web3Provider = web3Provider;\n    this._ops = ops;\n  }\n\n  async connect() {\n    if (!this._web3Provider) {\n      throw '{XMTPService} Web3Provider not found. Please unlock your Ethereum account, refresh the page and try again.';\n    }\n    // Create the client with your wallet.\n    // This will connect to the XMTP development network by default\n    const xmtp = await Client.create(this._web3Provider.getSigner(), {\n      env: this._isProduction ? 'production' : 'dev',\n    });\n    console.log('[INFO] {XMTPService} XMTP client created successfully');\n    this._xmtp.next(xmtp);\n  }\n\n  async loadDatas<T>(opts = <T>this._ops) {\n    const {conversationId = undefined, ...options} = opts || {} as any;\n    const {conversations = []} = await this._getConversations(conversationId);\n    this._conversations.next(conversations);\n    const messages = await this._getPreviousMessagesFromExistingConverstion(options);\n    this.messages$.next(messages);\n    this._listenAllUpcomingMessages();\n  }\n\n  async disconnect() {\n    const xmtp = this._xmtp.getValue();\n    if (!xmtp) {\n      return;\n    }\n    await xmtp.close();\n    this._xmtp.next(null as any);\n  }\n\n  async sendMessage(ops: {destinationAddress: string, message: string}) {\n    if (!this._web3Provider) {\n      throw '{XMTPService} Web3Provider not found. Please unlock your Ethereum account, refresh the page and try again.';\n    }\n    const {destinationAddress, message} = ops;\n    const {value: conversations = []} = this._conversations;\n    let conversation = conversations.find(\n      (c) => c.peerAddress === destinationAddress\n    );\n    if (!conversation) {\n      const {conversation: newConversation} = await this._startNewConversation(\n        destinationAddress\n      )\n      conversation = newConversation;\n    }\n    if (!conversation) {\n      throw 'Error while creating conversation';\n    }\n    // await conversation.send(message);\n  }\n\n  private async _startNewConversation(address: string, conversationId: string = 'hexa') {\n    if (!this._web3Provider) {\n      throw '{XMTPService} Web3Provider not found. Please unlock your Ethereum account, refresh the page and try again.';\n    }\n    let xmtp = this._xmtp.getValue();\n    if (!xmtp) {\n      await this.connect();\n      xmtp = this._xmtp.getValue();\n    }\n    const conversation = await xmtp.conversations\n      .newConversation(address, { conversationId, metadata: {} })\n      .catch((e) => {\n        throw e?.message || `Failed to start conversation with ${address}`;\n      });\n    // this._addListener(conversation);\n    this._conversations.next([...this._conversations.getValue(), conversation]);\n    return { conversation };\n  }\n\n  private async _getConversations(conversationId = 'hexa') {\n    if (!this._web3Provider) {\n      throw '{XMTPService} Web3Provider not found. Please unlock your Ethereum account, refresh the page and try again.';\n    }\n    let xmtp = this._xmtp.getValue();\n    if (!xmtp) {\n      await this.connect();\n      xmtp = this._xmtp.getValue();\n    }\n    const allConversations = await xmtp.conversations.list();\n    const conversations = allConversations.filter(\n      (convo) =>\n        convo.context?.conversationId &&\n        convo.context.conversationId.startsWith(conversationId)\n    )\n    return { conversations };\n  }\n\n  private async _getPreviousMessagesFromExistingConverstion(\n    opts?: ListMessagesOptions | undefined\n  ): Promise<IXMTPMessage[]> {\n    const xmtp = this._xmtp.value;\n    const messages = [];\n    const conversations = this._conversations.getValue();\n    console.log('[INFO] {XMTPService} Conversations', conversations, opts);\n    for (const conversation of conversations) {\n      // All parameters are optional and can be omitted\n      opts = opts\n        ? opts\n        : {\n            // Only show messages from last 24 hours\n            startTime: new Date(new Date().setDate(new Date().getDate() - 1)),\n            endTime: new Date(),\n          };\n      // get messages from conversation\n      const messagesInConversation = await conversation\n        .messages(opts)\n        .then((messages) => {\n          // filter out messages from self and return\n          return messages.filter(\n            (message) => message.senderAddress !== xmtp.address\n          );\n        });\n      // add conversation and messages to messages array\n      if (messagesInConversation.length > 0) {\n        messages.push({\n          conversation,\n          messagesInConversation,\n        });\n      }\n    };\n    console.log('[INFO] {XMTPService} Messages', messages);\n    return messages;\n  }\n\n  private async _listenAllUpcomingMessages() {\n    if (!this._web3Provider) {\n      throw '{XMTPService} Web3Provider not found. Please unlock your Ethereum account, refresh the page and try again.';\n    }\n    const xmtp = this._xmtp.value;\n    // Listen for new messages in existing conversations and new conversations\n    const streamAllMessages = await xmtp.conversations.streamAllMessages();\n    for await (const message of streamAllMessages) {\n      // filter out messages from self\n      if (message.senderAddress !== xmtp.address) {\n        console.log(\n          `[INFO] {XMTPService} New message received from ${message.senderAddress}: #${message?.id} ${message?.content}`\n        );\n        this.messages$.next([\n          ...this.messages$.getValue(),\n          {\n            messagesInConversation: [message]\n          }\n        ]);\n      }\n      break;\n    }\n  }\n\n}","import { IEncryptionService } from \"@hexa/interfaces\";\n\n/**\n * Strategy pattern for encryption and decryption services\n */\nexport class EncryptionStrategy implements IEncryptionService {\n\n  private _lib!:IEncryptionService;\n  \n  setStrategy(lib: IEncryptionService) {\n    this._lib = lib;\n  }\n\n  async encryptData(data: string, authorizedIDs: string[] = []) {\n    return this._lib.encryptData(data, authorizedIDs);\n  }\n\n  async decryptData(data: {\n    [key: string]: any;\n  }) {\n    return this._lib.decryptData(data);\n  }\n\n}","export * from './encryption.strategy';\nexport * from './ipfs-pinning.strategy';\n","import { Injectable } from \"@angular/core\";\nimport { IPiningService, Strategy } from \"@hexa/interfaces\";\n\n\n/**\n * Strategy pattern for IPFS Pinning services\n */\n@Injectable()\nexport class IPFSPinningStrategy extends Strategy<IPiningService> {\n  public readonly strategyType = 'ipfs-pinning';\n  private AVAILABLE_STRATEGY!: Map<string, IPiningService>;\n\n  constructor(libs: Map<string, IPiningService>) {\n    super();\n    this.AVAILABLE_STRATEGY = libs;\n  }\n\n  override setStrategy<T>(name: T|'pinata'|'web3.storage'): void {\n    const lib = this.AVAILABLE_STRATEGY.get(name as string);\n    if (!lib) {\n      throw new Error(`Unsupported strategy: [${name}]. Please check the available strategies and try again.`);\n    }\n    super.setStrategy(lib);\n  }\n  \n  async pin(hash: string): Promise<void> {\n    return this._lib.pin(hash);\n  }\n\n  async unpin(hash: string): Promise<void> {\n    return this._lib.unpin(hash);\n  }\n\n}","export const environment = {\n  version: process.env['NG_APP_VERSION'],\n  hexaPublicAddress: process.env['NG_APP_HEXA_PUBLICADDRES'],\n  production: true,\n  defaultChain: 'ethereum',\n  ipfs: {\n    pinning_service_token: process.env['NG_APP_PINNING_JWT'],\n    pinning_service_endpoint: process.env['NG_APP_PINNING_ENDPOINT'],\n    unpinning_service_endpoint: process.env['NG_APP_UNPINNING_ENDPOINT'],\n    api_endpoint: process.env['NG_APP_IPFS_API_ENDPOINT'],\n  },\n  auth: {\n    apikey: process.env['NG_APP_AUTH_APIKEY']\n  },\n  wallet: {\n    '0xapiKey': process.env['NG_APP_0xAPIKEY'],\n    'ankrApikey': process.env['NG_APP_ANKR_APIKEY'],\n  },\n  availableChainsId: {\n    // ETH\n    '1': 'ethereum', // mainnet\n    // '3': 'ropsten',\n    // '4': 'rinkeby',\n    // POLYGON\n    // '89': 'polygon', // mainnet\n    // '13881': 'mumbai',\n    // BNB\n    // '38': 'binance smart chain', // mainnet\n    // '61': 'binance smart chain testnet',\n  }\n};","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { defineCustomElements } from '@ionic/pwa-elements/loader';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nconst disableConsole = () => {\n  // disabling console.log in production\n  window.console.log = (...data: any[]) => ({});\n  // disabling console.warn in production\n  window.console.warn = (...data: any[]) => ({});\n  // disabling console.error in production\n  window.console.error = (...data: any[]) => ({});\n  // disabling console.info in production\n  window.console.info = (...data: any[]) => ({});\n  // disabling console.debug in production\n  window.console.debug = (...data: any[]) => ({});\n}\n\nif (environment.production) {\n  enableProdMode();\n  disableConsole();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  // Call the element loader after the platform has been bootstrapped\n  .then(()=> defineCustomElements(window))\n  // Global handler for unhandled promise rejections\n  .catch((err) => console.error(err));\n","export * from './lib/interfaces';\n","import { IStrategy } from \"../services/strategy.interface\";\n\nexport abstract class Strategy<T> implements IStrategy<T> {\n  abstract readonly strategyType: string;\n  protected _lib!: T;\n\n  setStrategy(lib: T) {\n    this._lib = lib;\n  }\n}","export * from './services/datastore-service.interface';\nexport * from './services/identity-service.interface';\nexport * from './services/ipfs-service.interface';\nexport * from './services/pining-service.interface';\nexport * from './services/auth-service.interface';\nexport * from './services/encryption-service.interface';\nexport * from './services/notification-service.interface';\nexport * from './services/loading-service.interface';\nexport * from './services/messaging-service.interface';\nexport * from './services/prompt-strategy-service.interface';\nexport * from './services/wallet-service.interface';\nexport * from './services/wallet-utils.interface';\n\nexport * from './abstracts/strategy';\n\nexport * from './objects/token.interface';\n","export * from './lib/token-injection';\nexport * from './lib/token.enum';\n\n","import { InjectionToken } from \"@angular/core\";\nimport { IAuthService, IGetTokensBalances, IMessagingService, INotificationService, IPiningServiceConfig } from \"@hexa/interfaces\";\nimport { TOKENS_NAME } from \"./token.enum\";\n\nconst APP_DID_SERVICE_TOKEN = new InjectionToken<IAuthService>('APP_DID_SERVICE');\nconst APP_WEB3AUTH_SERVICE_TOKEN = new InjectionToken<IAuthService>('APP_WEB3AUTH_SERVICE');\nconst APP_PINNING_SERVICE_DEFAULT_CONFIG_TOKEN = new InjectionToken<IPiningServiceConfig>('APP_PINNING_SERVICE_DEFAULT_CONFIG');\nconst APP_WALLET_SERVICE_APIKEYS_TOKEN = new InjectionToken<{[key: string]: any;}>(TOKENS_NAME.APP_WALLET_SERVICE_APIKEYS);\nconst APP_WALLET_UTILS_TOKEN = new InjectionToken<IGetTokensBalances>(TOKENS_NAME.APP_WALLET_UTILS);\nconst APP_MESSAGING_SERVICE_TOKEN = new InjectionToken<IMessagingService>('APP_MESSAGING_SERVICE');\nconst APP_NOTIFICATION_SERVICE_TOKEN = new InjectionToken<INotificationService>('APP_NOTIFICATION_SERVICE');\nconst APP_CERAMIC_SERVICE_TOKEN = new InjectionToken('APP_CERAMIC_SERVICE');\nconst APP_DATASTORE_SERVICE_TOKEN = new InjectionToken('APP_DATASTORE_SERVICE');\nconst APP_DID_ENCRYPTION_SERVICE_TOKEN = new InjectionToken('APP_DID_ENCRYPTION_SERVICE');\nconst APP_ENCRYPTION_SERVICE_TOKEN = new InjectionToken('APP_ENCRYPTION_SERVICE');\nconst APP_IS_PROD_TOKEN = new InjectionToken('APP_IS_PROD');\nconst APP_LOADER_SERVICE_TOKEN = new InjectionToken('APP_LOADER_SERVICE');\nconst APP_PINATA_SERVICE_TOKEN = new InjectionToken('APP_PINATA_SERVICE');\nconst APP_WEB3STORAGE_SERVICE_TOKEN = new InjectionToken('APP_WEB3STORAGE_SERVICE');\nconst APP_IPFS_PINNING_SERVICE_TOKEN = new InjectionToken('APP_IPFS_PINNING_SERVICE');\nconst APP_IPFS_SERVICE_TOKEN = new InjectionToken('APP_IPFS_SERVICE');\nconst APP_PROMPT_STRATEGY_SERVICE_TOKEN = new InjectionToken('APP_PROMPT_STRATEGY_SERVICE');\nconst APP_AUTH_APIKEY_TOKEN = new InjectionToken('APP_AUTH_APIKEY');\nconst APP_HEXA_PUBLICADDRES_TOKEN = new InjectionToken<string>(TOKENS_NAME.APP_HEXA_PUBLICADDRES);\n\nconst TOKENS_MAP = new Map();\nTOKENS_MAP.set('APP_DID_SERVICE', APP_DID_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_WEB3AUTH_SERVICE', APP_WEB3AUTH_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_PINNING_SERVICE_DEFAULT_CONFIG', APP_PINNING_SERVICE_DEFAULT_CONFIG_TOKEN);\nTOKENS_MAP.set(TOKENS_NAME.APP_WALLET_SERVICE_APIKEYS, APP_WALLET_SERVICE_APIKEYS_TOKEN);\nTOKENS_MAP.set(TOKENS_NAME.APP_WALLET_UTILS, APP_WALLET_UTILS_TOKEN);\nTOKENS_MAP.set('APP_MESSAGING_SERVICE', APP_MESSAGING_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_NOTIFICATION_SERVICE', APP_NOTIFICATION_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_CERAMIC_SERVICE', APP_CERAMIC_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_DATASTORE_SERVICE', APP_DATASTORE_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_DID_ENCRYPTION_SERVICE', APP_DID_ENCRYPTION_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_ENCRYPTION_SERVICE', APP_ENCRYPTION_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_IS_PROD', APP_IS_PROD_TOKEN);\nTOKENS_MAP.set('APP_LOADER_SERVICE', APP_LOADER_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_PINATA_SERVICE', APP_PINATA_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_WEB3STORAGE_SERVICE', APP_WEB3STORAGE_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_IPFS_PINNING_SERVICE', APP_IPFS_PINNING_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_IPFS_SERVICE', APP_IPFS_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_PROMPT_STRATEGY_SERVICE', APP_PROMPT_STRATEGY_SERVICE_TOKEN);\nTOKENS_MAP.set('APP_AUTH_APIKEY', APP_AUTH_APIKEY_TOKEN);\nTOKENS_MAP.set(TOKENS_NAME.APP_HEXA_PUBLICADDRES, APP_HEXA_PUBLICADDRES_TOKEN);\n\nexport function getInjectionToken(tokenName: string) {\n  return TOKENS_MAP.get(tokenName);\n}\n","export enum TOKENS_NAME  {\n  APP_DID_SERVICE = 'APP_DID_SERVICE',\n  APP_WEB3AUTH_SERVICE = 'APP_WEB3AUTH_SERVICE',\n  APP_PINNING_SERVICE_DEFAULT_CONFIG = 'APP_PINNING_SERVICE_DEFAULT_CONFIG',\n  APP_WALLET_SERVICE_APIKEYS = 'APP_WALLET_SERVICE_APIKEYS',\n  APP_WALLET_UTILS = 'APP_WALLET_UTILS',\n  APP_MESSAGING_SERVICE = 'APP_MESSAGING_SERVICE',\n  APP_NOTIFICATION_SERVICE = 'APP_NOTIFICATION_SERVICE',\n  APP_CERAMIC_SERVICE = 'APP_CERAMIC_SERVICE',\n  APP_DATASTORE_SERVICE = 'APP_DATASTORE_SERVICE',\n  APP_DID_ENCRYPTION_SERVICE = 'APP_DID_ENCRYPTION_SERVICE',\n  APP_ENCRYPTION_SERVICE = 'APP_ENCRYPTION_SERVICE',\n  APP_IS_PROD = 'APP_IS_PROD',\n  APP_LOADER_SERVICE = 'APP_LOADER_SERVICE',\n  APP_PINATA_SERVICE = 'APP_PINATA_SERVICE',\n  APP_WEB3STORAGE_SERVICE = 'APP_WEB3STORAGE_SERVICE',\n  APP_IPFS_PINNING_SERVICE = 'APP_IPFS_PINNING_SERVICE',\n  APP_IPFS_SERVICE = 'APP_IPFS_SERVICE',\n  APP_PROMPT_STRATEGY_SERVICE = 'APP_PROMPT_STRATEGY_SERVICE',\n  APP_AUTH_APIKEY = 'APP_AUTH_APIKEY',\n  APP_HEXA_PUBLICADDRES = 'APP_HEXA_PUBLICADDRES',\n}\n","var map = {\n\t\"./ion-accordion_2.entry.js\": [\n\t\t70079,\n\t\t8592,\n\t\t79\n\t],\n\t\"./ion-action-sheet.entry.js\": [\n\t\t25593,\n\t\t8592,\n\t\t5593\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t13225,\n\t\t8592,\n\t\t3225\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t4812,\n\t\t8592,\n\t\t4812\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t86655,\n\t\t6655\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t44856,\n\t\t8592,\n\t\t4856\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t13059,\n\t\t3059\n\t],\n\t\"./ion-breadcrumb_2.entry.js\": [\n\t\t58648,\n\t\t8592,\n\t\t8648\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t98308,\n\t\t8308\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t44690,\n\t\t4690\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t64090,\n\t\t4090\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t36214,\n\t\t6214\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t69447,\n\t\t9447\n\t],\n\t\"./ion-datetime-button.entry.js\": [\n\t\t17950,\n\t\t9022,\n\t\t7950\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t79689,\n\t\t9022,\n\t\t8592,\n\t\t9689\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t18840,\n\t\t8592,\n\t\t8840\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t40749,\n\t\t749\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t69667,\n\t\t8592,\n\t\t9667\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t83288,\n\t\t8592,\n\t\t3288\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t35473,\n\t\t8592,\n\t\t5473\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t53634,\n\t\t8592,\n\t\t3634\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t22855,\n\t\t2855\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t495,\n\t\t8592,\n\t\t495\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t58737,\n\t\t8592,\n\t\t8737\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t99632,\n\t\t8592,\n\t\t9632\n\t],\n\t\"./ion-picker-column-internal.entry.js\": [\n\t\t54446,\n\t\t8592,\n\t\t4446\n\t],\n\t\"./ion-picker-internal.entry.js\": [\n\t\t32275,\n\t\t2275\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t48050,\n\t\t8592,\n\t\t8050\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t18994,\n\t\t8994\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t23592,\n\t\t3592\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t35454,\n\t\t8592,\n\t\t5454\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t290,\n\t\t8592,\n\t\t290\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t92666,\n\t\t8592,\n\t\t2666\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t64816,\n\t\t4816\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t45534,\n\t\t5534\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t94902,\n\t\t8592,\n\t\t4902\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t91938,\n\t\t8592,\n\t\t1938\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t78179,\n\t\t8179\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t90668,\n\t\t668\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t61624,\n\t\t8592,\n\t\t1624\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t19989,\n\t\t9989\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t28902,\n\t\t8592,\n\t\t8902\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t70199,\n\t\t8592,\n\t\t199\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t48395,\n\t\t8395\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t96357,\n\t\t6357\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t38268,\n\t\t8268\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t15269,\n\t\t8592,\n\t\t5269\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t32875,\n\t\t2875\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 50863;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./pwa-action-sheet.entry.js\": [\n\t\t45464,\n\t\t5464\n\t],\n\t\"./pwa-camera-modal-instance.entry.js\": [\n\t\t68724,\n\t\t8724\n\t],\n\t\"./pwa-camera-modal.entry.js\": [\n\t\t8145,\n\t\t8145\n\t],\n\t\"./pwa-camera.entry.js\": [\n\t\t30527,\n\t\t527\n\t],\n\t\"./pwa-toast.entry.js\": [\n\t\t44389,\n\t\t4389\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 55899;\nmodule.exports = webpackAsyncContext;","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"names":["inject","Router","filter","firstValueFrom","getInjectionToken","TOKENS_NAME","AppGuard","constructor","APP_WEB3AUTH_SERVICE","APP_DID_SERVICE","canActivate","canActivateThisRoute","isAuthenticate","_didService","did$","value","authenticated","isReconnected","_isReconnect","_router","navigate","data","window","localStorage","getItem","previouslyConnectedWallets","JSON","parse","console","log","_authService","connectWallet","isWaiting$","pipe","isWaiting","factory","BrowserModule","RouterModule","CommonModule","ServiceWorkerModule","IonicModule","appRoutes","MAIN_COMPONENT","environment","PROVIDERS","AppModule","bootstrap","imports","forRoot","mode","initialNavigation","useHash","register","enabled","production","registrationStrategy","declarations","DashboardComponent","path","children","loadChildren","then","m","AuthModule","loadComponent","IpfsComponent","component","WelcomeModule","CalendarModule","DriveModule","WalletModule","NotesModule","redirectTo","pathMatch","EnvironmentInjector","i0","AppComponent","environmentInjector","isProd","loaderService","ngOnInit","version","env","APP_IS_PROD","APP_LOADER_SERVICE","selectors","decls","vars","consts","template","DOCUMENT","ActivatedRoute","IonPopover","IonToggle","ToastController","BehaviorSubject","ctx_r8","ctx_r19","_route","_toastService","_document","_notificationService","_promptStrategy","name","url","sort","isEnabled","isVisible","a","b","f","isConnected$","account$","_checkDarkModeSetting","sub","notifications$","subscribe","messages","length","displayNotification","content","_subs","push","params","id","_id","snapshot","parent","ngOnDestroy","forEach","unsubscribe","togglePage","streamId","toogleNotification","popoverElement","toggleElement","disabled","message","isConnected","disconnect","connect","catch","dismiss","ionToast","create","duration","cssClass","icon","position","buttons","text","role","present","setupIPFSPinService","userData","profile$","config","askSetupService","token","ipfsConfig","serviceName","updateProfilData","error","Error","confirmationMessage","color","toggleDarkMode","$event","body","classList","toggle","isDarkmode","contains","defaultView","setItem","toString","isDarkMode$","next","copyAccountAddressToClipboard","account","navigator","clipboard","writeText","toast","isSettingSaved","add","remove","APP_NOTIFICATION_SERVICE","APP_PROMPT_STRATEGY_SERVICE","ctx","UpdateComponent","COMPONENTS","SwUpdate","map","merge","of","Subject","updates","_toast","updateAvailable$","versionUpdates","e","type","_displayNotif","closed$","activateUpdate","location","reload","showCloseButton","closeButtonText","onDidDismiss","AddressToAvatarPipe","transform","theme","blockies","default","pure","defaultValue","ipfs","pinning_service_token","API_CONFIG_PROVIDER","provide","APP_WALLET_SERVICE_APIKEYS","useValue","wallet","APP_PINNING_SERVICE_DEFAULT_CONFIG","APP_AUTH_APIKEY","auth","apikey","APP_HEXA_PUBLICADDRES","hexaPublicAddress","DIDService","Web3AuthService","LocalAuthService","LocalDIDServcie","AUTHENTICATION_PROVIDER","useClass","includes","NotificationService","XMTPService","COMMUNICATION_PROVIDER","APP_MESSAGING_SERVICE","CeramicClient","DatastoreService","LocalDatastoreServcie","DATABASE_PROVIDER","APP_CERAMIC_SERVICE","useFactory","public_node","hexaCeramicNode","CERAMIC_CLIENT","APP_DATASTORE_SERVICE","DIDEncryptionService","LocalEncryptionService","EncryptionStrategy","ENCRYPTION_PROVIDER","APP_DID_ENCRYPTION_SERVICE","APP_ENCRYPTION_SERVICE","encryptLib","strategy","setStrategy","deps","ErrorHandler","GlobalErrorHandlerService","ERROR_PROVIDER","IS_PROD_PROVIDER","LOADER_PROVIDER","MEDIA_STORAGE_PROVIDER","PROMPT_STRATEGY_PROVIDER","debounceTime","distinctUntilChanged","LOADERCLIENT","setStatus","status","isVisible$","asObservable","IPFSService","PinataService","LocalIPFSService","Web3storageService","IPFSPinningStrategy","APP_PINATA_SERVICE","APP_WEB3STORAGE_SERVICE","APP_IPFS_SERVICE","APP_IPFS_PINNING_SERVICE","authService","pinata","web3","profil","mapStrategy","Map","set","pin","hash","unpin","PromptStrategyService","DIDDataStore","TileDocument","IIdentityService","LoadingController","_ceramic","_did","_isProd","_loaderService","schemas","basicProfile","definitions","BasicProfile","tiles","ceramic","model","aliases","datastore","_datastore","getData","family","tags","familyTag","doc","_getDocument","loadData","load","saveData","controller","_getAuthorizedDidID","deterministic","controllers","update","haveEmptyContent","Object","keys","ionLoader","keyboardClose","hasParent","key","join","existKey","newValue","stringify","Date","now","_identityService","encryptData","authorizedDID","unit8Data","TextEncoder","encode","did","didID","createJWE","jwe","decryptData","decryptedJWEunit8Data","decryptJWE","decryptedJWE","TextDecoder","decode","DID","EthereumAuthProvider","ThreeIdAuthProvider","ThreeIdConnect","EthSelfIDAuthProvider","SelfID","provider","ethereum","_auth","_authenticateWithEthereum","ethereumProvider","_connectWith3ID","authProvider","_threeID","getDidProvider","_authWithSelfID","selfID","authenticate","connectNetwork","threeidConnect","_selfId$","_saveLatestConnectionDateTime","NgZone","AlertController","_alertService","_zone","_loadingCtrl","handleError","indexOf","split","trim","run","existingLoader","getTop","existingAlert","appAlert","header","CID","DagAPI","IPiningService","disconect","_ipfsNode","dag","stop","file","s","nodeIsOnline","isOnline","cid","timeout","preload","progress","prog","getFromCID","asyncUint8Array","cat","blobsPart","chunk","File","getDag","dag$","cidFromString","existingKey","existingData","reader","FileReader","readAsDataURL","Promise","resolve","reject","onload","base64","result","onerror","response","fetch","blob","put","node","get","IAuthService","IMessagingService","tap","_loaderCtrl","_messagingService","messages$","messagesInConversation","flat","startsWith","_parseMessage","latestNotifedISODatetime","toISOString","t","setTimeout","clearTimeout","ionLoading","loadDatas","sendNotification","metaData","senderAddress","destinationAddress","filterKey","messageData","createdISODateTime","base64Data","btoa","sendMessage","base64Message","replace","prefixKey","b64messageArray","jsonMessage","atob","dataMessage","IPiningServiceConfig","profile","defaultConfig","hashToPin","method","headers","Headers","Authorization","res","json","err","ops","userWantSetup","_promptInfos","r","values","selectedService","_promptSelectService","apiConfig","promptAPIKeys","_promptAPIKeys","undefined","ctrl","alertUI","subHeader","checked","inputs","label","availableService","urlAPI","find","placeholder","ethers","Magic","WebAuthnExtension","IDatastoreService","IAuthUser","getResolver","get3IDResolver","Caip10Link","hashMessage","DB_NAME","MAINNET_RPC_URL","_msgService","_authApiKey","_magicWeb3","accountToConnect","magic","getProvider","ethersProvider","providers","Web3Provider","accounts","connectWithUI","on","event","send","recoveredAddress","utils","recoverAddress","isValidSignature","toLocaleLowerCase","_connectDID","latestConnectionISODatetime","ethereumProvider$","signer$","getSigner","newNetwork","oldNetwork","_connectOthersServices","Boolean","address","removeItem","_redirectToRoot","getAccountDID","chainParam","link","fromAccount","signAndVerify","signer","signedMessage","signMessage","verifyMessage","accountAddress","isDIDConnected","resolvers","setResolver","isAuth","customNodeOptions","_getRPCNodeOptions","network","extensions","RPC_NODE_OPTIONS","rpcUrl","chainId","defaultChainId","chainIdAsDecimal","Number","BigInt","nodeOps","n","navigateByUrl","getProfilData","mostRecentDate","getTime","shift","opts","startTime","endTime","init","creationISODatetime","_setLocalUser","Client","IBaseMessage","_xmtp","xmtp","web3Provider","_web3Provider","_ops","_isProduction","conversationId","options","conversations","_getConversations","_conversations","_getPreviousMessagesFromExistingConverstion","_listenAllUpcomingMessages","getValue","close","conversation","c","peerAddress","newConversation","_startNewConversation","metadata","allConversations","list","convo","context","setDate","getDate","streamAllMessages","lib","_lib","authorizedIDs","Strategy","libs","AVAILABLE_STRATEGY","process","defaultChain","pinning_service_endpoint","unpinning_service_endpoint","api_endpoint","availableChainsId","enableProdMode","defineCustomElements","disableConsole","warn","info","debug","__NgCli_bootstrap_1","bootstrapModule","InjectionToken","APP_DID_SERVICE_TOKEN","APP_WEB3AUTH_SERVICE_TOKEN","APP_PINNING_SERVICE_DEFAULT_CONFIG_TOKEN","APP_WALLET_SERVICE_APIKEYS_TOKEN","APP_WALLET_UTILS_TOKEN","APP_WALLET_UTILS","APP_MESSAGING_SERVICE_TOKEN","APP_NOTIFICATION_SERVICE_TOKEN","APP_CERAMIC_SERVICE_TOKEN","APP_DATASTORE_SERVICE_TOKEN","APP_DID_ENCRYPTION_SERVICE_TOKEN","APP_ENCRYPTION_SERVICE_TOKEN","APP_IS_PROD_TOKEN","APP_LOADER_SERVICE_TOKEN","APP_PINATA_SERVICE_TOKEN","APP_WEB3STORAGE_SERVICE_TOKEN","APP_IPFS_PINNING_SERVICE_TOKEN","APP_IPFS_SERVICE_TOKEN","APP_PROMPT_STRATEGY_SERVICE_TOKEN","APP_AUTH_APIKEY_TOKEN","APP_HEXA_PUBLICADDRES_TOKEN","TOKENS_MAP","tokenName"],"sourceRoot":"webpack:///","x_google_ignoreList":[44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61]}